'use strict';(function(g){function e(){}function b(b,f){if(a)return f.indexOf(b);for(var j=f.length;j--;)if(f[j]===b)return j;return-1}var c=e.prototype,i=[],a=i.indexOf?!0:!1;c.getListeners=function(b){var a=this._events||(this._events={});return a[b]||(a[b]=[])};c.addListener=function(a,f){var j=this.getListeners(a);-1===b(f,j)&&j.push(f);return this};c.removeListener=function(a,f){var j=this.getListeners(a),c=b(f,j);-1!==c&&(j.splice(c,1),0===j.length&&(this._events[a]=null));return this};c.addListeners=
function(b,a){return this.manipulateListeners(!1,b,a)};c.removeListeners=function(b,a){return this.manipulateListeners(!0,b,a)};c.manipulateListeners=function(b,a,j){var c,h,d=b?this.removeListener:this.addListener,b=b?this.removeListeners:this.addListeners;if("object"===typeof a)for(c in a){if(a.hasOwnProperty(c)&&(h=a[c]))"function"===typeof h?d.call(this,c,h):b.call(this,c,h)}else for(c=j.length;c--;)d.call(this,a,j[c]);return this};c.removeEvent=function(a){a?this._events[a]=null:this._events=
null;return this};c.emitEvent=function(a,b){for(var j=this.getListeners(a),c=j.length;c--;)!0===j[c].apply(null,b||i)&&this.removeListener(a,j[c]);return this};"function"===typeof define&&define.amd?define(function(){return e}):g.EventEmitter=e})(this);
StackExchange.realtime=function(){function g(){if(!(null==n||1!=n.readyState))for(var m=0,d=r.length;m<d;m++)e("sending: "+r[m]),n.send(r[m])}function e(m){StackExchange.options.user.isDeveloper&&console.log(m)}function b(){s.addListener("hb",function(m){n.send(m)})}function c(m){r.push(m);g()}function i(m,d){1!=$("#vote-accepted-"+m.answerid).length&&($(".vote-accepted-on").remove(),d||$('.vote input[value="'+m.answerid+'"]').parent().append('<span class="vote-accepted-on" title="The question owner accepted this as the best answer">accepted</span>'))}
function a(){$.ajax({type:"POST",url:"/review/suggested-edit-count",data:{fkey:StackExchange.options.user.fkey},dataType:"json",success:function(m){if(m&&m.count){var m=m.count,d=$(".suggested-edits-count");d.text()!=m&&(0==$(":animated").length&&d.fadeTo("fast",0.5).fadeTo("fast",1),d.text(m))}}})}function k(){$("#new-answer-activity").remove();$("#answers-header").prepend(w)}function f(m){var d=$(".question[data-questionid="+m.id+"], .answer[data-answerid="+m.id+"]"),a=$('<div class="new-post-activity" data-postid="'+
m.id+'">an edit has been made to this post; click to load</div>');0<d.find(".new-post-activity[data-postid="+m.id+"]").length||d.prepend(a.click(function(){$(".new-post-activity[data-postid="+m.id+"]").remove();0==$("#review-content").length&&$.get("/posts/ajax-load-realtime/{postIdsSemiColonDelimited}?title=true".format({postIdsSemiColonDelimited:m.id}),z(d.find(".postcell, .answercell"),m));$(document).trigger("refreshEdit",m.id)}))}function j(m,d,a){null!=StackExchange.options.user.accountId&&
StackExchange.tagPreferences.isIgnored(m.body)||(m.fetch&&$.ajax({url:"/posts/"+m.id+"/"+a}).done(function(d){m.body=d;q[m.id]={id:m.id,body:m.body,index:(new Date).getTime(),siteid:m.siteid}}),q[m.id]={id:m.id,body:m.body,index:(new Date).getTime(),siteid:m.siteid},$(".new-post-activity").remove(),$("#question-mini-list, #questions").prepend(A),0<$(".tag-sponsorship").length&&$("#question-mini-list, #questions").css("margin-top","0px"),d&&h())}function o(m,d){return m.index<d.index?-1:m.index>d.index?
1:0}function h(){var m=[],a;for(a in q)q.hasOwnProperty(a)&&m.push(q[a]);m=m.sort(o);for(a=0;a<m.length;a++){var b=m[a];$("#question-summary-"+b.id).remove();$(b.body).prependTo("#question-mini-list, #questions").hide().fadeIn()}d(0);null!=StackExchange.options.user.accountId&&StackExchange.tagPreferences.applyPrefs(!0,x);styleCode();l();$(".new-post-activity").remove();q={}}function d(m){var d=document.title.replace(/^\(\d*\*?\) /,"");0<m&&(d="("+m+") "+d);window.setTimeout(function(){$(document).attr("title",
d)},200)}function l(){for(var m=$("span.relativetime, span.relativetime-clean"),d=0;d<m.length;d++)if(m[d].title){var a;a=m[d].title;if(null==a||20!=a.length)a=void 0;else{a=a.substr(0,10)+"T"+a.substr(11,10);a=new Date(a);a=((new Date).getTime()-a.getTime())/1E3;var b=Math.floor(a/86400);a=isNaN(b)||0>b||31<=b?void 0:0==b&&(2>a&&"just now"||60>a&&Math.floor(a)+(v?"s ago":" secs ago")||120>a&&(v?"1m ago":"1 min ago")||3600>a&&Math.floor(a/60)+(v?"m ago":" mins ago")||7200>a&&(v?"1h ago":"1 hour ago")||
86400>a&&Math.floor(a/3600)+(v?"h ago":" hours ago"))}a&&(m[d].innerHTML=a)}}var n,q={},p=[],t=0,r=[],y=10,u=!1,v=!1,x,s=new EventEmitter,w=function(){var m=Object.keys(p).length;0==m&&$("#new-answer-activity").remove();return $('<div id="new-answer-activity">'+m+" new answer"+(1<m?"s":"")+" to this question</div>").click(function(){StackExchange.realtime.expandAnswers()})},z=function(m,d){return function(a){var b=$(a).filter(".question, .answer"),h=b.find(".postcell, .answercell"),j=m.closest(".question"),
c=0<j.length,f=$("h1 a.question-hyperlink"),l=b.data("title"),t=c&&$.trim(f.text())!=l,e=$(".question-status"),i=function(m,d){return function(){return $.Deferred(function(a){null==d||d()?m.animate({opacity:0},150).promise().done(function(){a.resolve()}):a.resolve()})}},b=i(f,function(){return t}),r=i(m),i=i(e);$.when(b(),r(),i()).done(function(){t&&f.text(l).animate({opacity:1},150);var d=function(m,d){return new $.Deferred(function(a){d.css({opacity:0});m.replaceWith(d);d.animate({opacity:1},150,
function(){a.resolve()})})};d(m,h).done(function(){styleCode();StackExchange.question.bindSuggestedEditPopupLinks();c&&StackExchange.inlineTagEditing&&StackExchange.inlineTagEditing.init()});var b=$(a).filter(".question-status");b.length?(e.length||(e=$("<div>").addClass("question-status").insertAfter(j)),d(e,b)):e.remove()});window.history.pushState(d,"new post","#"+d.id)}},A=function(){var m=Object.keys(q).length;d(m);return $('<div class="new-post-activity">'+m+" question"+(1<m?"s":"")+" with new activity</div>").click(function(){StackExchange.realtime.expandActiveQuestions()})};
return{init:function(d){var a=d.split(","),a=a[t%a.length];null!=a&&0!=a.indexOf("ws://")&&(a="ws://"+a);if("WebSocket"in window||"MozWebSocket"in window){if(n)try{e("closing WebSocket"),n.close()}catch(h){}n||(e("opening WebSocket to: "+a),n="WebSocket"in window?new WebSocket(a):new MozWebSocket(a),n.onopen=function(){u||(u=!0);t=0;e("WebSocket opened");g();b();setInterval(l,6E4)},n.onmessage=function(d){d=$.parseJSON(d.data);s.emitEvent(d.action,[d.data])},n.onclose=function(){n=null;e("WebSocket closed");
5>t&&0<y&&(t++,y--,e("reconnect attempt:"+t+" max retries:"+y),setTimeout(function(){StackExchange.realtime.init(d)},1E3*((new Date).getTime()%50/20)))},n.onerror=function(){e("WebSocket failed");n=null})}},expandActiveQuestions:h,expandAnswers:function(){$("#tabs").show();$("#new-answer-activity").remove();var d=$("#answers #answers-header"),a=d.find(".answers-subheader h2"),b=parseInt(a.text())+p.length;isNaN(b)&&(b=p.length);a.text(b+" Answer"+(1<b?"s":""));$.ajax({url:"/posts/ajax-load-realtime/{postIdsSemiColonDelimited}".format({postIdsSemiColonDelimited:p.join(";")})}).done(function(a){var b=
$('<div class="dno" />').append(a);b.insertAfter(d).fadeIn(400,function(){b.removeClass("dno");StackExchange.vote.bindFetchVoteCounts();styleCode();StackExchange.vote.init($(".question").data("questionid"));b.find(".answer").each(function(){StackExchange.comments.init({post:$(this)})})})});StackExchange.question.bindSuggestedEditPopupLinks();l();p=[]},subscribeToActiveQuestions:function(d,a,b,h,f,e,l){d=d+"-"+a;x=b;v=e;c(d);s.addListener(d,function(d){d=$.parseJSON(d);if(null!=f)for(var m=0;m<f.length;m++)if(-1==
$.inArray(f[m],d.tags))return;j(d,h,a);null!=l&&l(d)})},subscribeToInboxNotifications:function(){if(null!=StackExchange.options.user.accountId){var d=StackExchange.options.user.accountId+"-inbox";c(d);s.addListener(d,function(d){$(".unreadCount").remove();var a=$('<a class="unreadCount" title="unread messages in your inbox">'+d+"</a>").insertAfter(".genu");$("#portalLink .unreadCount").css({marginTop:a.css("margin-top"),opacity:1},2E3);genuwine.setUnreadCount(d)})}},subscribeToQuestion:function(d,
a){var b=d+"-question-"+a;c(b);s.addListener(b,function(d){d=$.parseJSON(d);if(d.acctid!=StackExchange.options.user.accountId)switch(d.a){case "score":var a=$('.vote input[value="'+d.id+'"]').siblings(".vote-count-post");a.text()!=d.score&&(a.text(d.score),0==$(":animated").length&&a.fadeTo("fast",0.7).fadeTo("fast",1),StackExchange.question.canViewVoteCounts()&&StackExchange.vote.bindFetchVoteCounts());break;case "comment-add":0==$("#comment-"+d.commentid).length&&(d=$("#comments-link-"+d.id),a=
d.data("comments-count")||0,a++,d.data("comments-count",a),d.attr("title","expand to show all comments on this post, or add one of your own"),d.html("add / show <b>"+a+"</b> more comment"+(1<a?"s":"")).show().fadeTo("fast",0.7).fadeTo("fast",1));break;case "answer-add":0==$("#answer-"+d.answerid).length&&(p.push(d.answerid),StackExchange.cardiologist.isHeartBeating()?StackExchange.helpers.DelayedReaction(k,5E3).trigger():k(),StackExchange.cardiologist.notifiedOfNewAnswer());break;case "accept":i(d);
break;case "unaccept":i(d,!0);break;case "post-edit":f(d)}})},unsubscribeToQuestion:function(d,a){var b=d+"-question-"+a;e("unsubscribing: "+b);var h=$.inArray(b,r);-1!=h&&(r.splice(h,1),null==n||1!=n.readyState||n.send("-"+b))},subscribeToReputationNotifications:function(d){null!=StackExchange.options.user.accountId&&(d=d+"-"+StackExchange.options.user.userId+"-reputation",c(d),s.addListener(d,function(d){var a=$("#hlinks .reputation-score");a.text()!=d.score&&(0==$(":animated").length&&a.fadeTo("fast",
0.8).fadeTo("fast",1),a.text(d))}))},subscribeToSuggestedEdits:function(d){d+="-suggested-edits-count-update";c(d);s.addListener(d,function(){a()})},updateRelativeDates:l,subscribeToReviewDashboard:function(d){d+="-review-dashboard-update";c(d);s.addListener(d,function(d){var d=$.parseJSON(d),a=$('.dashboard-activity[data-review-task="'+d.i+'"]');0==a.find('.dashboard-user[data-user="'+d.u+'"]').length&&(a.find(".dashboard-user:nth-child(6)").remove(),a.children().css({left:"-44px"}),a.prepend(d.html).children().animate({left:0}))})}}}();
"use strict";StackExchange.anonymous={};
var gauth=function(){return{informStackAuth:function(g){if(gauth.enabled()){var e=document.domain;"meta."==e.substr(0,5)&&(e=e.substr(4,e.length-4));var b=$.cookie("gauth");if(null==b)$.cookie("gauth",null,{path:"/",domain:e}),$.cookie("gauth",null,{path:"/",domain:document.domain});else{"."!=e.charAt(0)&&(e="."+e);$.cookie("gauth",null,{path:"/",domain:e});$.cookie("gauth",null,{path:"/",domain:document.domain});var c=b.indexOf(":"),e=b.substr(0,c),b=b.substr(c+1),i=g+"/auth/global/write?authToken="+
encodeURIComponent(e)+"&nonce="+encodeURIComponent(b);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+i+"'></iframe>")})}}},checkStackAuth:function(g){if(gauth.enabled()&&null==$.cookie("gauthed")){$.cookie("gauthed","1",{path:"/"});var e=function(b){if(b.origin==g)if("No Local Storage"==b.data)gauth.noGAuthStorage();else if("No Session"==b.data)gauth.noGAuthSession();else{var c=b.data.substr(0,b.data.indexOf(",")),b=b.data.substr(b.data.indexOf(",")+1);$.post("/users/login/global",
{authToken:c,nonce:b},function(b){gauth.globallyAuthed(b)},"json")}};window.attachEvent?window.attachEvent("onmessage",e):window.addEventListener("message",e,!1);$.post("/users/login/global/request","",function(b){var c=g+"/auth/global/read?request="+encodeURIComponent(b.token)+"&nonce="+encodeURIComponent(b.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+c+"'></iframe>")})},"json")}},enabled:function(){$.cookie("enabledCheck","1");
if(null==$.cookie("enabledCheck"))return!1;$.cookie("enabledCheck",null);return"undefined"==typeof localStorage?!1:!0},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(g){if(g&&g.Message){var g=g.Message+" ",e,b=!1,c=""+window.location,i=c.indexOf("returnurl=");if(-1!=i){var a=c.indexOf("&",i);-1==a&&(a=c.length);e=decodeURIComponent(c.substring(i+10,a));e=/^(?:http:\/\/|\/)/.test(e)?e.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,""):null}-1!=c.indexOf("/users/login")&&
(b=!0,e=e||"/");StackExchange.helpers.showFancyOverlay({message:b?g+"<br>You are being redirected...":g+(e?"<a href=\"javascript:window.location='"+e+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'),showClose:!b,complete:function(){b&&(window.location=e)}})}}}}(),genuwine=function(){var g,e="",b,c,i=[],a=function(){return $(".genu").hasClass("genu-on")},k=function(){var d=$(".genu"),a=$("#seWrapper");if(0==a.length||
0<b||c){j();var a=$("#seWrapper"),h;0<b?(h=$("#seTabInbox"),t(h)):c?(h=$("#seTabNotices"),o(h)):(h=$("#seTabHot"),l(h));h.addClass("seCurrent")}if(h=d.hasClass("genu-on")){$(".unreadCountTab").remove();$("#portalLink .itemBoxNew").removeClass("itemBoxNew");a.fadeOut("fast");for(a=0;a<i.length;a++)i[a]();i=[];0<c&&$("#portalLink .unreadCount").text(""+c).addClass("newNotices").show().click(k)}else a.fadeIn("fast"),$("#portalLink .unreadCount").hide();d.toggleClass("genu-on",!h);-1==b&&$(d).ready(function(){$("#seTabInbox").hide()});
f($("#seTabInbox"),$("#seTabNotices"))},f=function(d,a){StackExchange.options.site.isNoticesTabEnabled&&c&&0==a.find(".unreadCountTab").length&&a.prepend('<span class="unreadCountTab newNotices">'+c+"</span>");0<b&&0==d.find(".unreadCountTab").length&&d.prepend('<span class="unreadCountTab">'+b+"</span>")},j=function(){$("#seWrapper").remove();var a='<div id="seWrapper" class="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+e+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li>'+
(!StackExchange.options.user.isAnonymous?'<li><a id="seTabInbox">Inbox</a></li>':"")+(!StackExchange.options.user.isAnonymous&&StackExchange.options.site.isNoticesTabEnabled?'<li><a id="seTabNotices">Notifications</a></li>':"")+'</ul></div><div class="seContainer"></div><div class="seFooter">'+(!StackExchange.options.user.isAnonymous?'<div id="seTabEmail" class="seEmailAccount"><a>email settings</a></div>':"")+'<a id="seClose">close</a></div></div>',b=$("#hlinks"),b=b.height()+b.offset().top+5;$(a).appendTo("#portalLink").css({top:b}).find("ul.seNavLinks a, #seTabEmail").click(function(){var a=
$(this);$(".seNavLinks a").removeClass("seCurrent");a.addClass("seCurrent");switch(a.attr("id")){case "seTabHot":l(a);$("#seContainerSites, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerHot").fadeIn("fast");break;case "seTabSites":0==$("#seContainerSites").length&&d(a);$("#seContainerHot, #seContainerInbox, #seContainerEmail, #seContainerNotices").hide();$("#seContainerSites").fadeIn("fast");break;case "seTabInbox":t(a);$("#seContainerHot, #seContainerSites, #seContainerEmail, #seContainerNotices").hide();
$("#seContainerInbox").fadeIn("fast");break;case "seTabEmail":0==$("#seContainerEmail").length&&n(a);$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerNotices").hide();$("#seContainerEmail").fadeIn("fast");break;case "seTabNotices":o(a),$("#seContainerHot, #seContainerSites, #seContainerInbox, #seContainerEmail").hide(),$("#seContainerNotices").fadeIn("fast")}});$("#seClose").click(function(){k()})},o=function(d){0==$("#seContainerNotices").length&&v(d,"/notices/genuwine","jsonp",
h,!0)},h=function(d,a){for(var b='<div id="seContainerNotices" style="display:none">',h=0;h<a.length;h++)var j=a[h],b=b+('<div class="noticeBox'+(j.is_unread?" itemBoxNew":"")+'"><a href="'+j.site_url+'" class="siteLinkFavicon"><img src="'+j.icon+'"></a><div class="siteInfo"><p>'+j.text+"</p></div></div>");x(d,b+"</div>");i.push(function(){c=0;f($("#seTabInbox"),$("#seTabNotices"))});c=0},d=function(d){v(d,e+"/genuwine/sites?callback=?&host="+document.location.host+(g?"&accountId="+g:""),"jsonp",
p)},l=function(d){0==$("#seContainerHot").length&&v(d,e+"/genuwine?callback=?","jsonp",q)},n=function(d){v(d,"/accounts/email-settings","json",function(d,a){function b(){$("#email-save").removeAttr("disabled");$("#email-confirmation").html("")}x(d,'<div id="seContainerEmail" style="display:none; font-size:11px;"><div class="itemBox" style="border-bottom: 0px"><p>Would you like to receive unread inbox messages via email?</p><div>Email: <input id="email-notify" name="email-notify" style="width:300px;" value="'+
a.verifiedEmail+'"></input></div><div><input type="radio" name="optIn" value="true" id="email-enable"'+(!0==a.optIn?'checked="checked"':"")+'"> <label for="email-enable">Email me my unread inbox messages </label> <select id="email-freq"><option value="3">every 3 hours</option><option value="24">daily</option><option value="168">weekly</option></select> </div><div><input type="radio" name="optIn" value="false" id="email-disable"'+(!0!=a.optIn?'checked="checked"':"")+'"> <label for="email-disable">Do not email me inbox messages</label></input></div><div><input type="button" name="save" id="email-save" value="Save" disabled="disabled"></input></div><div id="email-confirmation" style="display:none;"></div></div></div>');
$("#email-freq").val(a.freq).on("click focus",function(){$("#email-enable").prop("checked",!0)});$("#email-notify").focus().keyup(b);$("#email-enable, #email-disable, #email-freq").change(b);$("#email-save").click(function(){s();$.post("/accounts/verified-email-set",{email:$("#email-notify").val(),fkey:StackExchange.options.user.fkey,optin:$("input[name=optIn]:checked").val(),freq:$("#email-freq").val()},function(d){$("#seWrapper .seContainer").removeSpinner();$("#email-confirmation").html(d.message).fadeIn();
d.success&&$("#email-save").attr("disabled","disabled")},"json")})},!0)},q=function(d,a){for(var b=$("<div/>"),h='<div id="seContainerHot" style="display:none">',j=0;j<a.length;j++)var c=a[j],f=c.SiteId,l='href="http://'+f+"/q/"+c.Id+'?hq=1"',e=parseInt(c.DisplayScore,10),h=h+('<div class="itemBox"><a '+l+' class="seNumAnswer">'+e+'</a><div class="siteInfo"><p><a '+l+">"+b.text(c.Title).html()+'</a></p><a href="http://'+f+'" class="siteLink">'+f+"</a></div></div>");x(d,h+"</div>")},d=function(d){v(d,
e+"/genuwine/sites?callback=?&host="+document.location.host+(g?"&accountId="+g:""),"jsonp",p)},p=function(d,a){for(var b='<div id="seContainerSites" style="display:none">',h=0;h<a.length;h++)var j=a[h],c=j.Name,f='href="http://'+j.Id+'?as=1"',b=b+('<div class="itemBox"><a '+f+' class="siteFavicon"><img src="'+j.FaviconUrl+'" alt="'+c+'"></a><div class="siteInfo"><p><a '+f+">"+c+"</a></p><a "+f+' class="siteLink">'+j.Description+"</a></div></div>");x(d,b+"</div>")},t=function(d){-1!=b&&(0==$("#seContainerInbox").length||
0<b)&&r(d)},r=function(d){v(d,"/inbox/genuwine","json",y,!0)},y=function(d,a){for(var h='<div id="seContainerInbox" style="display:none">',j=0;j<a.length;j++){var c=a[j],l='href="'+c.Url+'"',e='title="'+c.CreationDate+'"',t=c.Count,h=h+('<div class="itemBox'+(c.IsNew?" itemBoxNew":"")+'"><a '+l+' class="siteLinkFavicon"><img src="'+c.FaviconUrl+'" alt="'+c.SiteUrl+'"></a><div class="siteInfo">');"careers message"==c.Type?h+="<p><a "+l+' style="font-weight:normal"><b>'+c.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>":
"invitation"==c.Type?(e=c.Count,h+="<p><a "+l+' style="font-weight:normal"><b>'+e+"</b> "+("invitation"+(1<e?"s":""))+" awarded on <b>Stack Overflow Careers</b></a></p>"):h+="<p>"+(1<t?t+" ":"")+c.Type+" on <a "+l+" "+e+">"+c.Title+"</a></p>";h+='<p class="inboxSummary">'+(c.Summary||"")+"</p></div></div>"}g&&5<=a.length&&(h+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+g+'?tab=inbox">more inbox messages &hellip;</a></div></div>');x(d,h+"</div>");
i.push(function(){b=0;f($("#seTabInbox"),$("#seTabNotices"))});b=0},u={},v=function(d,a,b,h,j){var c=d.attr("id");if(u[c])s();else{u[c]=!0;s();var f=function(){u[c]=!1;StackExchange.helpers.showErrorMessage($("#seWrapper .seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:a,dataType:b,success:function(a){u[c]=!1;a&&(0<a.length||j)?h(d,a):f()},error:f,complete:function(){$("#seWrapper .seContainer").removeSpinner()}})}},x=function(d,a){var b=$(a);b.prependTo("#seWrapper .seContainer");
d.hasClass("seCurrent")&&b.fadeIn("fast")},s=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner("#seWrapper .seContainer",{position:"relative",left:"10px",top:"10px"})},w=function(){var d=$("#portalLink .unreadCount"),a=d.css("margin-top");d.css({marginTop:-20,opacity:0}).show().animate({marginTop:a,opacity:1},2E3)},z=function(){var d=$("#portalLink .unreadCount"),a=d.data("events");(!a||!a.click)&&0<d.length&&d.click(k)};return{isVisible:a,click:k,setUnreadCount:function(d){b=
d;var h=$("#seTabInbox");0<d?($("#portalLink .unreadCount").text(b),h.hasClass("seCurrent")&&a()&&r(h),w()):$("#portalLink .unreadCount").text("").hide();$("#portalLink .unreadCount").removeClass("newNotices");z()},animateInbox:w,init:function(d,h,j){var f=$(".genu");1<=f.length&&(f[0].onclick=null);g=d;e=f.attr("href");b=h;c=j;!(0<b)&&StackExchange.options.site.isNoticesTabEnabled&&(99<c&&(c=99),0<c&&$("#portalLink .unreadCount").text(""+c).addClass("newNotices"),z());f.removeAttr("href").click(k);
z();$(document).click(function(d){a()&&!$.contains($("#portalLink")[0],d.target)&&k()})}}}();
StackExchange.notify=function(){function g(a,b){var h=$("#dismissed-messages");h.val(h.val()+"~"+a+(b?" "+b:"")+"~")}function e(a,b){var h=$("#dismissed-messages").val();return!h?!1:RegExp("~"+a+(b?" "+b:"")+"~").test(h)}function b(a,b,h){var d=parseInt($("body").css("margin-top").match(/\d+/)),a=b*d/a;h?$("body:not(.no-message-slide)").animate({marginTop:a+"px"},"fast","linear"):$("body:not(.no-message-slide)").css("marginTop",a+"px")}var c=0,i=function(a,f){var h=$("#notify-"+a+(f?"-"+f:""));-1==
a?$.cookie("m","0",{expires:90,path:"/"}):-1<a&&$.post("/messages/mark-as-read",{messagetypeid:a,id:f?f:null});g(a,f);c--;h.fadeOut("fast",function(){b(c+1,c,!0);h.remove()})},a=function(a){c++;if(e(a.messageTypeId,a.id))return!1;var b="";a.messageTypeId&&(b=' id="notify-'+a.messageTypeId+(a.id?"-"+a.id:"")+'"');b="<div"+b+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+a.text+"</span>";if(a.showProfile)var h=encodeURIComponent("/users/"+
a.userId+"?tab=badges&sort=recent"),b=b+(' See your <a href="/messages/mark-as-read?messagetypeid='+a.messageTypeId+"&returnurl="+h+'">profile</a>.');b=$(b+"</div>");b.find(".notify-close").click(function(){a.close&&a.close();i(a.messageTypeId,a.id)});$("#notify-container").append(b);return!0},k=function(){$("#notify-container div").fadeIn("slow")},f=function(b,c){var h=$('<div class="link-more"><a>view '+b+" more notification"+(1!=b?"s":"")+"</a></div>");$("#notify-container").append(h);h.click(function(){h.detach();
for(var d=0;d<c.length;d++)a(c[d]);k()})};return{showMessages:function(j,e){for(var h=0,d=e?2:j.length,l=0;l<d&&l<j.length;l++)a(j[l])&&h++;b(c,h,!1);k();e&&h<j.length&&(d=j.slice(d),f(j.length-h,d))},show:function(b,c){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear");a({text:b,messageTypeId:c});k()},close:i,getMessageText:function(a){return $("#notify-"+a+" .notify-text").text()}}}();
function moveScroller(){var g=$("#scroller").width(),e=function(){var b=$(window).scrollTop(),c=$("#scroller-anchor").offset().top,e=$("#scroller");b>c?e.height()>$(window).height()?e.css({position:"fixed",top:"",bottom:"0px",width:g}):e.css({position:"fixed",top:"0px",bottom:"",width:g}):b<=c&&e.css({position:"relative",top:"",bottom:""})};$(window).scroll(e).resize(e);e()}
var styleCode=function(){return function(){"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);var g=!1;$("pre code").parent().each(function(){$(this).hasClass("prettyprint-override")&&($(this).removeClass("prettyprint-override").addClass("prettyprint"),g=!0);var e;if(e=!$(this).hasClass("prettyprint")){e=$(this);var b=$("#prettify-lang").text();""!=b?(e.addClass(b),e=!0):e=!1}e&&($(this).addClass("prettyprint"),g=!0)});g&&("undefined"!=typeof jtab?jtab.renderimplicit():StackExchange.using("prettify",
function(){StackExchange.prettify.applyCodeStyling()}))}}();
StackExchange.helpers.MagicPopup=function(g){function e(a,c){var h=$("<div id='"+g.id+"'/>").html(c),d=$("<div />").css({overflow:"hidden",position:"absolute","z-index":1002,width:1,height:1,top:0,left:0}).append(h).appendTo("body");window.MathJax&&MathJax.Hub.Typeset(h.attr("id"));var f=g.showing(a,h),e={left:f.left};f.hasOwnProperty("bottom")?(e.bottom=f.bottom,e.top="auto"):e.top=f.top;var k;g.shown&&(k=function(){g.shown(a,h)});d.css(e).animate({height:h.outerHeight()+8,width:h.outerWidth()+8},
300,k);b=function(){d.stop().remove();g.removed&&g.removed(a,h);b=i=null};i=StackExchange.helpers.DelayedReaction(b,5);e=d;f.additional&&(e=e.add(f.additional));e.hover(i.cancel,i.trigger)}var b,c,i,a,k={},f=StackExchange.helpers.DelayedReaction(function(c,f){if(!a&&c){var h;g.cache&&"c_"+c in k?h=$.Deferred().resolve(k["c_"+c]):(h=$.ajax({type:"GET",url:c,dataType:"html"}),g.cache&&h.done(function(d){k["c_"+c]=d}));h.done(function(d){b&&b();""!=d&&e(f,d)})}},500);$(document).delegate(g.selector,
{mouseenter:function(){if(i&&this===c)i.cancel();else return c=this,f.trigger(g.getUrl(this),this),a=!1},mouseleave:function(){a=!0;f.cancel();i&&i.trigger()}})};
StackExchange.tagmenu=function(){function g(b){var b=$(b),a=b.attr("href");if(!a||"/"!=a.charAt(0))return null;a=b.text();if(-1<a.indexOf("*"))return null;b.attr("title","");return"/tags/"+encodeURIComponent(a)+"/subscriber-info"}function e(b,a){var c=$(b),f=c.offset(),e=c.outerHeight(),c={left:f.left},g=f.top+e,e=f.left+a.outerWidth();a.height()+g>$(window).height()+$(window).scrollTop()?c.bottom=$(window).height()-f.top-8:c.top=g;f=Math.max(1024,$(window).width());e>f&&(c.left-=e-f);return c}var b,
c;return{init:function(i){b=i;c||(c=!0,StackExchange.options.isMobile||(StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag,.no-tag-menu)",id:"tag-menu",getUrl:g,showing:e,shown:function(a,c){b&&b(c,$(a).text())}}),$("#interesting-tags .post-tag").addClass("user-tag")))}}}();
StackExchange.usermenu=function(){function g(b,a){var e=$(b).find("img:first"),f=e.offset(),j=e.height(),g=e.width(),h=Math.max(g,j),d=64*j/h,h=64*g/h,l=a.find("img:first").css({width:h,height:d}),n=l.offset();l.css("visibility","hidden");c=e.clone().css({position:"absolute",zIndex:1003,left:f.left,top:f.top,width:g,height:j}).appendTo("body");var q=function(){l[0].complete?(l.css("visibility","visible"),c.fadeOutAndRemove()):setTimeout(q,500)};c.animate({width:h,height:d,top:f.top+n.top},200,q);
return{top:f.top,left:f.left-n.left,additional:c}}function e(){c.remove()}var b,c;return{init:function(){b||(b=!0,StackExchange.options.isMobile||StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:function(b){b=/\/users\/([^/]+).*$/.exec($(b).closest(".user-hover").find(".user-details a").attr("href"));return!b?null:"/users/user-info/"+b[1]},cache:!0,id:"user-menu",showing:g,removed:e}))}}}();
StackExchange.chatAd=function(){function g(){var d=$(".question .post-taglist .post-tag");return!d.length?null:d.map(function(d,a){return $(a).text()}).get().join(" ")}function e(d){return 10>d?"0"+d:d}function b(d){var a=new Date;a.setTime(1E3*d);return[a.getUTCFullYear(),"-",e(a.getUTCMonth()+1),"-",e(a.getUTCDate())," ",e(a.getUTCHours()),":",e(a.getUTCMinutes()),":",e(a.getUTCSeconds()),"Z"].join("")}function c(d){var a=Math.floor((new Date).getTime()/1E3)-d,b=a%60,h=Math.floor(a/60),c=Math.floor(a/
3600);if(1>a)return"just now";if(60>a)return 1==b?"1 sec ago":b+" secs ago";if(3600>a)return 1==h?"1 min ago":h+" mins ago";if(86400>a)return 1==c?"1 hour ago":c+" hours ago";a=Math.floor(a/86400);if(1==a)return"yesterday";if(2>=a)return a+" days ago";d=new Date(1E3*d);return p[d.getMonth()]+" "+d.getDate()+" at "+d.getHours()+":"+e(d.getMinutes())}function i(d){var a=$("<div />");a.text(d);return a.html().replace('"',"&quot;")}function a(){$.get(d,null,function(d,a,b){o(d,a,b)})}function k(d){if("!"==
d.charAt(0)){d=d.substr(1);if(/^http:\/\/i.stack.imgur.com\//.test(d))var a=/\?/.test(d)?"&":"?",d=d+(a+"g&s=32");return d}return"http://www.gravatar.com/avatar/"+d+"?s=23&d=identicon&r=PG"}function f(d){for(var a=$('<div class="ad502-users" />'),b=0;b<d.length&&7>b;b++){var f=d[b],e=f.name;f.lastPost&&(e+=": "+c(f.lastPost));var l=$('<a href="'+(h+"/users/"+f.id)+'" />');$("<img height='23' width='23' />").attr("title",e).attr("src",k(f.emailhash)).appendTo(l);a.append(l)}return a}function j(d){var a=
d.user;return(d=d.userid)?'<a href="'+h+"/users/"+d+'">'+i(a)+"</a>":i(a)}function o(d){var e=$("#ad502-rooms");if(!d.error){e.html("");for(var g=d.rooms,k=0;k<g.length&&2>k;k++){var p=g[k],o=h+"/rooms/"+p.id,s=$('<div class="ad502-room"></div>');s.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+i(p.name)+'"><a href="'+o+'">'+i(p.name)+"</a></span></h3>"));p.messages&&0<p.messages.length&&s.append($('<span title="'+b(p.lastPost)+'" class="ad502-last-message">'+c(p.lastPost)+
" - "+j(p.messages[0])+"</span><br>"));p.singleImage?s.append($('<div class="ad502-users"><img src="'+h+"/rooms/users/"+p.id+'.jpeg" /></div>')):s.append(f(p.users));e.append(s)}1<d.activeUsers?$("#h-chat-link").text(d.activeUsers+" People Chatting"):$("#h-chat-link").text("Visit Chat");$("#h-chat-link").attr("title",d.activeUsers+" users active in "+d.activeRooms+" rooms the last 60 minutes")}l<=q&&window.setTimeout(a,1E3*l);l+=n}var h,d,l=180,n=30,q=480,p="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");
/^\/questions\/\d+/i.test(window.location.pathname)&&(q=0);return{init:function(b){h=b.chatUrl;d=b.reloadUrl;if(b.tagBased){var c=g();if(!c)return;d+=(/\?/.test(d)?"&":"?")+"tags="+encodeURIComponent(c)}null===b.preloadData?a():o(b.preloadData,null,null)}}}();
StackExchange.helpers.noDiacritics=function(){var g={"\u00e0\u00e5\u00e1\u00e2\u00e4\u00e3\u00e5\u0105\u0250\u1d44\u1d9b":"a","\u00e6\u01e3\u01fd\u1d02\u1d46":"ae","\u00e7\u0107\u010d\u0109":"c","\u0111\u018d\u00f0\u00d0":"d","\u00e8\u00e9\u00ea\u00eb\u0119\u01dd\u1d08\u1d4c":"e","\u214e":"f","\u011f\u011d\u1d77":"g","\u0125\u0265\u02ae\u1da3":"h","\u00ec\u00ed\u00ee\u00ef\u0131\u1d09\u1d4e":"i","\u0135":"j","\u029e":"k","\u0142":"l","\u026f\u0270\u1d5a\u1dad\u1d1f":"m","\u00f1\u0144":"n","\u00f2\u00f3\u00f4\u00f5\u00f6\u00f8\u0151":"o",
"\u0153\u0276\u1d14":"oe","\u0159\u0279\u027a\u027b\u02b4\u02b5":"r","\u015b\u015f\u0161\u015d":"s","\u00df":"ss","\u0287":"t","\u00de":"th","\u00f9\u00fa\u00fb\u00fc\u016d\u016f":"u","\u028c\u1dba":"v","\u028d":"w","\u00fd\u0178\u00ff\u028e":"y","\u017c\u017a\u017e":"z"};return function(e){for(var b in g)g.hasOwnProperty(b)&&(e=e.replace(RegExp("["+b+"]","g"),g[b]));return e}}();
function sanitizeAndSplitTags(g,e){for(var g=$.trim(g).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 "),b=g.split(/[\s|,;]+/),c=[],i=0;i<b.length;i++){var a=b[i].toLowerCase();StackExchange.options.site.nonAsciiTags||(a=StackExchange.helpers.noDiacritics(a));a=a.replace(/_/g,"-");a=a.replace(RegExp("[^a-z0-9.#+"+(e?"*":"")+(StackExchange.options.site.nonAsciiTags?"0-9,A-Z,_,a-z,\u00aa,\u00b5,\u00ba,\u00c0-\u00d6,\u00d8-\u00f6,\u00f8-\u02c1,\u02c6-\u02d1,\u02e0-\u02e4,\u02ec,\u02ee,\u0370-\u0374,\u0376-\u0377,\u037a-\u037d,\u0386,\u0388-\u038a,\u038c,\u038e-\u03a1,\u03a3-\u03f5,\u03f7-\u0481,\u048a-\u0523,\u0531-\u0556,\u0559,\u0561-\u0587,\u05d0-\u05ea,\u05f0-\u05f2,\u0621-\u064a,\u0660-\u0669,\u066e-\u066f,\u0671-\u06d3,\u06d5,\u06e5-\u06e6,\u06ee-\u06fc,\u06ff,\u0710,\u0712-\u072f,\u074d-\u07a5,\u07b1,\u07c0-\u07ea,\u07f4-\u07f5,\u07fa,\u0904-\u0939,\u093d,\u0950,\u0958-\u0961,\u0966-\u096f,\u0971-\u0972,\u097b-\u097f,\u0985-\u098c,\u098f-\u0990,\u0993-\u09a8,\u09aa-\u09b0,\u09b2,\u09b6-\u09b9,\u09bd,\u09ce,\u09dc-\u09dd,\u09df-\u09e1,\u09e6-\u09f1,\u0a05-\u0a0a,\u0a0f-\u0a10,\u0a13-\u0a28,\u0a2a-\u0a30,\u0a32-\u0a33,\u0a35-\u0a36,\u0a38-\u0a39,\u0a59-\u0a5c,\u0a5e,\u0a66-\u0a6f,\u0a72-\u0a74,\u0a85-\u0a8d,\u0a8f-\u0a91,\u0a93-\u0aa8,\u0aaa-\u0ab0,\u0ab2-\u0ab3,\u0ab5-\u0ab9,\u0abd,\u0ad0,\u0ae0-\u0ae1,\u0ae6-\u0aef,\u0b05-\u0b0c,\u0b0f-\u0b10,\u0b13-\u0b28,\u0b2a-\u0b30,\u0b32-\u0b33,\u0b35-\u0b39,\u0b3d,\u0b5c-\u0b5d,\u0b5f-\u0b61,\u0b66-\u0b6f,\u0b71,\u0b83,\u0b85-\u0b8a,\u0b8e-\u0b90,\u0b92-\u0b95,\u0b99-\u0b9a,\u0b9c,\u0b9e-\u0b9f,\u0ba3-\u0ba4,\u0ba8-\u0baa,\u0bae-\u0bb9,\u0bd0,\u0be6-\u0bef,\u0c05-\u0c0c,\u0c0e-\u0c10,\u0c12-\u0c28,\u0c2a-\u0c33,\u0c35-\u0c39,\u0c3d,\u0c58-\u0c59,\u0c60-\u0c61,\u0c66-\u0c6f,\u0c85-\u0c8c,\u0c8e-\u0c90,\u0c92-\u0ca8,\u0caa-\u0cb3,\u0cb5-\u0cb9,\u0cbd,\u0cde,\u0ce0-\u0ce1,\u0ce6-\u0cef,\u0d05-\u0d0c,\u0d0e-\u0d10,\u0d12-\u0d28,\u0d2a-\u0d39,\u0d3d,\u0d60-\u0d61,\u0d66-\u0d6f,\u0d7a-\u0d7f,\u0d85-\u0d96,\u0d9a-\u0db1,\u0db3-\u0dbb,\u0dbd,\u0dc0-\u0dc6,\u0e01-\u0e30,\u0e32-\u0e33,\u0e40-\u0e46,\u0e50-\u0e59,\u0e81-\u0e82,\u0e84,\u0e87-\u0e88,\u0e8a,\u0e8d,\u0e94-\u0e97,\u0e99-\u0e9f,\u0ea1-\u0ea3,\u0ea5,\u0ea7,\u0eaa-\u0eab,\u0ead-\u0eb0,\u0eb2-\u0eb3,\u0ebd,\u0ec0-\u0ec4,\u0ec6,\u0ed0-\u0ed9,\u0edc-\u0edd,\u0f00,\u0f20-\u0f29,\u0f40-\u0f47,\u0f49-\u0f6c,\u0f88-\u0f8b,\u1000-\u102a,\u103f-\u1049,\u1050-\u1055,\u105a-\u105d,\u1061,\u1065-\u1066,\u106e-\u1070,\u1075-\u1081,\u108e,\u1090-\u1099,\u10a0-\u10c5,\u10d0-\u10fa,\u10fc,\u1100-\u1159,\u115f-\u11a2,\u11a8-\u11f9,\u1200-\u1248,\u124a-\u124d,\u1250-\u1256,\u1258,\u125a-\u125d,\u1260-\u1288,\u128a-\u128d,\u1290-\u12b0,\u12b2-\u12b5,\u12b8-\u12be,\u12c0,\u12c2-\u12c5,\u12c8-\u12d6,\u12d8-\u1310,\u1312-\u1315,\u1318-\u135a,\u1380-\u138f,\u13a0-\u13f4,\u1401-\u166c,\u166f-\u1676,\u1681-\u169a,\u16a0-\u16ea,\u1700-\u170c,\u170e-\u1711,\u1720-\u1731,\u1740-\u1751,\u1760-\u176c,\u176e-\u1770,\u1780-\u17b3,\u17d7,\u17dc,\u17e0-\u17e9,\u1810-\u1819,\u1820-\u1877,\u1880-\u18a8,\u18aa,\u1900-\u191c,\u1946-\u196d,\u1970-\u1974,\u1980-\u19a9,\u19c1-\u19c7,\u19d0-\u19d9,\u1a00-\u1a16,\u1b05-\u1b33,\u1b45-\u1b4b,\u1b50-\u1b59,\u1b83-\u1ba0,\u1bae-\u1bb9,\u1c00-\u1c23,\u1c40-\u1c49,\u1c4d-\u1c7d,\u1d00-\u1dbf,\u1e00-\u1f15,\u1f18-\u1f1d,\u1f20-\u1f45,\u1f48-\u1f4d,\u1f50-\u1f57,\u1f59,\u1f5b,\u1f5d,\u1f5f-\u1f7d,\u1f80-\u1fb4,\u1fb6-\u1fbc,\u1fbe,\u1fc2-\u1fc4,\u1fc6-\u1fcc,\u1fd0-\u1fd3,\u1fd6-\u1fdb,\u1fe0-\u1fec,\u1ff2-\u1ff4,\u1ff6-\u1ffc,\u203f-\u2040,\u2054,\u2071,\u207f,\u2090-\u2094,\u2102,\u2107,\u210a-\u2113,\u2115,\u2119-\u211d,\u2124,\u2126,\u2128,\u212a-\u212d,\u212f-\u2139,\u213c-\u213f,\u2145-\u2149,\u214e,\u2183-\u2184,\u2c00-\u2c2e,\u2c30-\u2c5e,\u2c60-\u2c6f,\u2c71-\u2c7d,\u2c80-\u2ce4,\u2d00-\u2d25,\u2d30-\u2d65,\u2d6f,\u2d80-\u2d96,\u2da0-\u2da6,\u2da8-\u2dae,\u2db0-\u2db6,\u2db8-\u2dbe,\u2dc0-\u2dc6,\u2dc8-\u2dce,\u2dd0-\u2dd6,\u2dd8-\u2dde,\u2e2f,\u3005-\u3006,\u3031-\u3035,\u303b-\u303c,\u3041-\u3096,\u309d-\u309f,\u30a1-\u30fa,\u30fc-\u30ff,\u3105-\u312d,\u3131-\u318e,\u31a0-\u31b7,\u31f0-\u31ff,\u3400-\u4db5,\u4e00-\u9fc3,\ua000-\ua48c,\ua500-\ua60c,\ua610-\ua62b,\ua640-\ua65f,\ua662-\ua66e,\ua67f-\ua697,\ua717-\ua71f,\ua722-\ua788,\ua78b-\ua78c,\ua7fb-\ua801,\ua803-\ua805,\ua807-\ua80a,\ua80c-\ua822,\ua840-\ua873,\ua882-\ua8b3,\ua8d0-\ua8d9,\ua900-\ua925,\ua930-\ua946,\uaa00-\uaa28,\uaa40-\uaa42,\uaa44-\uaa4b,\uaa50-\uaa59,\uac00-\ud7a3,\uf900-\ufa2d,\ufa30-\ufa6a,\ufa70-\ufad9,\ufb00-\ufb06,\ufb13-\ufb17,\ufb1d,\ufb1f-\ufb28,\ufb2a-\ufb36,\ufb38-\ufb3c,\ufb3e,\ufb40-\ufb41,\ufb43-\ufb44,\ufb46-\ufbb1,\ufbd3-\ufd3d,\ufd50-\ufd8f,\ufd92-\ufdc7,\ufdf0-\ufdfb,\ufe33-\ufe34,\ufe4d-\ufe4f,\ufe70-\ufe74,\ufe76-\ufefc,\uff10-\uff19,\uff21-\uff3a,\uff3f,\uff41-\uff5a,\uff66-\uffbe,\uffc2-\uffc7,\uffca-\uffcf,\uffd2-\uffd7,\uffda-\uffdc":
"")+"-]","g"),"");a=a.replace(/^[#+-]+/,"");a=a.replace(/[.-]+$/,"");0<a.length&&-1==$.inArray(a,c)&&c.push(a)}return c}
StackExchange.question=function(){var g=function(a,d){var b=null!=a;a||(a=$("div.question div.post-menu a.short-link"));var c=a.closest(".post-menu, .help-menu");if(a.hasClass("share-link"))c.find(".close-share-tip").click();else{a.addClass("share-link");var f=a.attr("id").substring(10),e=a.closest(".col-section").length?"section":a.closest("div.question").length?"question":"answer",j="http://"+document.location.host+a.attr("href"),g=("answer"==e?"Answer: ":"")+$("#question-header a").text(),i='<div class="share-tip" style="display:none">share a link to this '+
e+'<input type="text" value="'+j+'" style="display:block; width:292px;">';StackExchange.options.site.enableSocialMediaInSharePopup&&(i+='<div id="share-icons"><a id="share-gp-'+f+'" class="share-gp" title="share link to this '+e+' on Google+">share [g+]</a><a id="share-fb-'+f+'" class="share-fb" title="share link to this '+e+' on Facebook">share [fb]</a><a id="share-tw-'+f+'" class="share-tw" title="share link to this '+e+' on Twitter">share [tw]</a></div>');var k=$(i+'<a class="close-share-tip" style="float:right">close</a></div>');
StackExchange.options.site.enableSocialMediaInSharePopup&&(e=encodeURIComponent(j),g=encodeURIComponent(g),StackExchange.share.gplus($("#share-gp-"+f,k),e,g,"2"),StackExchange.share.facebook($("#share-fb-"+f,k),e,g,"2"),StackExchange.share.twitter($("#share-tw-"+f,k),e,g,"2"),$("#share-icons a",k).click(function(){k.fadeOutAndRemove()}));d&&k.find(".close-share-tip").before('<a id="link-post-'+f+'" style="float:left">cite</a>');k.appendTo(c).fadeIn(b?"fast":0).bind("removing",function(){a.removeClass("share-link")}).find(".close-share-tip").click(function(){k.fadeOutAndRemove()}).end().find("input[type=text]").select()}},
e=function(a){var d=$("#post-form h2:first"),b=d.wrap("<div />").parent(),c=b.wrap("<div />").parent(),f=$("<div />").prependTo(c),e=c.height(),j=$("<div />"),a=$(a),g=parseInt(d.css("margin-bottom")),i=$("#content"),k=$("#wmd-input").outerWidth(),o=i.offset().left>d.offset().left-5&&"visible"!=i.css("overflow-x");j.css({height:0,overflowY:"hidden"}).appendTo(b).append(a);c.css({height:e,position:"relative"});b.css({position:"absolute",bottom:-g,width:k});f.addClass("answer-help-background").css({position:"absolute",
bottom:-g,height:0,width:k});o&&(f.css("left",0),b.animate({paddingLeft:5},1E3));j.animate({height:a.height()+g+10},1E3);f.animate({height:a.height()+g+10+e},1E3);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(b).fadeIn(1E3).find("a").one("click",function(a){var c=$(this).parent();setTimeout(function(){c.remove()},1);j.animate({height:0},1E3,function(){j.add(f).remove();d.unwrap().unwrap()});f.animate({height:0},1E3);o&&b.animate({paddingLeft:0},1E3);a.preventDefault()})},
b=function(){$.get("/posts/answer-help").then(e)},c,i,a,k=function(){var a=window.location.href;0>a.indexOf("#")||(a=a.match(/#(\d+|comment(\d+)_(\d+))/i))&&(a[2]?f(a[2],a[3]):j($(".answer[data-answerid="+a[1]+"]")))},f=function(a,d){var b="#comment-"+a,c=$(b);c.length?j(c):StackExchange.comments.loadAll($("#comments-link-"+d)).done(function(){j($(b))})},j=function(b){var d=a;b.css({backgroundColor:c}).animate({backgroundColor:d},2E3,"linear",function(){$(this).css("background-color","")});b.is(".comment")&&
b[0].scrollIntoView(!0)},o=function(a){a=a||{};$(".post-menu a.short-link").live("click",function(d){if(!d.ctrlKey&&!d.metaKey)return g($(this),a.showCitation),!1})};return{initTitleSearch:function(a,d,b){var c=document.title,f=0,e,j;a.attr("autocomplete","off");var g=function(g){var i=a.val();if(!(""==i||i==e&&!0!==g||StackExchange.options.site.newTitleSearchBoxEnabled&&0<$(".title-float-selected:visible").length)){for(var k=i.split(" "),r=0,w=0;w<k.length;w++)0<$.trim(k[w]).length&&r++;k=(new Date).getTime();
w=(k-f)/1E3;!0!==g&&(3>r||5>w)&&!a.hasClass("edit-field-overlayed")||(f=k,e=i,b&&(document.title=i?i+" - "+b:c),d.empty(),StackExchange.helpers.addSpinner(d),j&&j.fadeOutAndRemove(),$.ajax({url:"/search/titles",dataType:"json",data:{title:i},success:function(a){if(a){if(a.notification){var b=StackExchange.postValidation.getSidebarPopupOptions();b.type="info";j=StackExchange.helpers.showMessage(d,a.notification,b)}a.content&&(d.html(a.content),setTimeout(function(){d.find(".answer-link a").attr("target",
"_blank")},1))}},complete:function(){StackExchange.helpers.removeSpinner(d)}}))}},i=!1;d.mouseenter(function(){i=!0}).mouseleave(function(){i=!1});a.keyup(g).blur(function(){var a=function(){f=0;g()};if(i)d.one("mouseleave",a);else a()});return function(a){f=0;g(a)}},showShareTip:g,getQuestionId:function(a){a=(a?a.closest(".question"):$(".question")).data("questionid");if(!a)throw Error("getQuestionId could not find an id");return a},highlightComment:f,initShareLinks:o,canViewVoteCounts:function(){return i},
init:function(f){StackExchange.question.fullInit?StackExchange.question.fullInit(f):StackExchange.question.bindAnonymousVoteDisclaimers();StackExchange.comments.init({autoShowCommentHelp:f.autoShowCommentHelp});f.showShareTip&&g();o(f);if(f.showAnswerHelp)$("#wmd-input").one("focus",b);f.showCitation&&$("div.share-tip a[id^='link-post-']").live("click",function(){$(this).closest(".post-menu").find(".close-share-tip").click();citation.show($(this))});a=f.backgroundColor;c=f.highlightColor;i=f.canViewVoteCounts;
k(f)}}}();
StackExchange.question.bindAnonymousVoteDisclaimers=function(){function g(e){var b=$(this),c=b.closest("div.vote"),g=b.prop("className"),a=/vote-up/.test(g),k=/vote-down/.test(g),g=/star/.test(g);e.preventDefault();if(a||k)if(e=c.find("input").val(),StackExchange.options.isMobile)StackExchange.helpers.fireAndForget("/posts/popup/anon-vote/"+e+"?voteTypeId="+(a?2:3)),a='Thank you for your feedback.<br />Please <a href="/users/login?returnurl='+escape(document.location)+'">log in or register</a> to vote for this '+(b.closest(".answer").length?
"answer":"question")+".",StackExchange.helpers.showMessage(b,a,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}});else{if(b="anon-vote-popup-"+e,!c.is(":working")&&!$("."+b).length){c.data("working",!0);$(".anon-vote-popup").fadeOutAndRemove();StackExchange.helpers.removeMessages();var f=$('<div class="anon-vote-popup popup">Sending feedback&nbsp;</div>').addClass(b).addSpinner();f.appendTo("body").center().fadeIn("fast");$.ajax({type:"POST",url:"/posts/popup/anon-vote/"+
e+"?voteTypeId="+(a?2:3),dataType:"html",success:function(a){f.html(a)},error:function(){f.remove()},complete:function(){c.data("working",!1)}})}}else g&&($(".anon-vote-popup").fadeOutAndRemove(),a='Please <a href="/users/login?returnurl='+escape(document.location)+'">log in or register</a> to favorite this '+(b.closest(".answer").length?"answer":"question")+".",StackExchange.helpers.showMessage(b,a,{type:"info",position:{my:"left top",at:"right center"},css:{"margin-left":"-10px"}}))}$(".vote-up-off, .vote-down-off, .star-off:not(.disabled)").each(function(){var e=
$(this);e.data("bound-anonymous")||(e.data("bound-anonymous",!0),e.click(g))});StackExchange.question.bindFetchAcceptedAnswerDates()};StackExchange.question.bindFetchAcceptedAnswerDates=function(){$(".load-accepted-answer-date").hover(function(){var g=$(this);if(!g.is(":working")){g.working(!0);var e=g.closest(".answer").data("answerid");e?$.get("/posts/"+e+"/accepted-answer-date",function(b){g.attr("title",b)}):g.attr("title","")}})};
StackExchange.comments=function(){function g(a,b){this.postId=a;this.jDiv=b;this.jCommentsLink=$("#comments-link-"+a)}function e(a){var b=(a.constructor===$?a:$(a)).closest(".question, .answer, div[id^='post-']").find(".comments"),a=b.attr("id").replace(/^comments-/,"");if(c[a])return c[a];b=new g(a,b);return c[a]=b}function b(){if(0!=$(".question[data-questionid]").length){var a=StackExchange.question.getQuestionId();$(".comment .comment-date > span").each(function(){var b=$(this),c=b.closest(".answer"),
c=c&&c.length?c.data("answerid"):0,e=b.closest(".comment").attr("id").substr(8);b.wrap('<a class="comment-link" onclick="StackExchange.question.highlightComment({cid}, {aid})" href="{hash}"></a>'.format({hash:"#comment"+e+"_"+(c?c:a),cid:e,aid:c}))})}}var c={},i=function(){};g.prototype={checkDiscussion:i,ensureInput:i,saveEditingComments:i,restoreEditingComments:i,commentsShown:function(){this.jCommentsLink.hide();this.jCommentsLink.data("comments-count",0)},addShow:function(a){var b=this;this.loadAllComments().done(function(){b.jCommentsLink.hide();
b.checkDiscussion()});var c=this.ensureInput();c&&!a&&c.focus()},ajax:function(a,b,c,e){c&&!e&&StackExchange.helpers.addSpinner(c,{"margin-left":"10px"});var g=this;return $.ajax(a).fail(function(a){a=a.responseText;if(!a||100<=a.length)a="An error occured"+(b?" "+b:"");0==a.indexOf("You may only")?StackExchange.helpers.showInfoMessage(c||g.jDiv,a):StackExchange.helpers.showErrorMessage(c||g.jDiv,a);c&&!e&&StackExchange.helpers.removeSpinner()}).done(StackExchange.helpers.removeSpinner).promise()},
showComments:function(a,c){this.saveEditingComments(c);this.jDiv.find(" > table > tbody").html(a);this.restoreEditingComments();this.jCommentsLink.text("add comment");"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]);b();this.commentsShown()},loadAllComments:function(a){this.jDiv.removeClass("dno");if(!a&&!/more comment/.test($("#comments-link-"+this.postId).text()))return $.Deferred().resolve().promise();var b=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments",
dataType:"html"},"while fetching comments").done(function(a){b.showComments(a)}).promise()}};return{init:function(a){a=a&&a.post||document;$("a[id^='comments-link-']",a).click(function(){var a=/more comment/.test($(this).text());e(this).addShow(a)});a==document&&b()},loadAll:function(a){return e(a).loadAllComments(!0)},extendPostUi:function(a){for(var b in a)a.hasOwnProperty(b)&&(g.prototype[b]=a[b])},uiForPost:e}}();
StackExchange.share=function(){function g(b,c,e){window.open(b,c,e)||(window.location.href=b)}function e(b,c,e){var c=c+("="+("undefined"!==typeof e?e:"1")),e=b.indexOf("?"),a=b.indexOf("#");return-1==e?-1==a?b+"?"+c:b.substring(0,a)+"?"+c+b.substring(a):-1==a?b+"&"+c:b.substring(0,a)+"&"+c+b.substring(a)}return{gplus:function(b,c,i,a){c=e(c,"sgp",a);b.click(function(){g("https://plus.google.com/share?url="+c,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(b,
c,i,a){c=e(c,"stw",a);b.click(function(){g("http://twitter.com/share?url="+c+"&ref=twitbtn&text="+i,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(b,c,i,a){c=e(c,"sfb",a);b.click(function(){g("http://www.facebook.com/sharer.php?u="+c+"&ref=fbshare&t="+i,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}}();
function initTagRenderer(g,e){window.tagRenderer||(window.tagRendererRaw=function(b,c,i){var c=c||"",i=i||"a",a="";c||(g&&-1<$.inArray(b,g)?a=" required-tag":e&&-1<$.inArray(b,e)&&(a=" moderator-tag"));a="<"+i+" class='post-tag"+a+"'";"a"===i.toLowerCase()&&(a+=" href='"+c+"/questions/tagged/"+encodeURIComponent(b)+"' title=\"show questions tagged '"+b+"'\" rel='tag'");return a+(">"+b+"</"+i+">")},window.tagRenderer=function(b,c,e){return $(tagRendererRaw(b,c,e))})}
function showFadingHelpText(g){g.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}
function initFadingHelpText(){var g={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title","wmd-input-42":"#how-to-format"},e=$("#wmd-input, #tagnames, #title, .tag-editor input, #wmd-input-42"),b=function(b){return $(b).parent().hasClass("tag-editor")?g["tag-editor"]:g[$(b).attr("id")]};e.focus(function(){var c=b(this);e.each(function(){var a=b(this);a!=c&&$(a).hide()});var g=$(c);g.is(":visible")||showFadingHelpText(g)})}
$.fn.extend({postId:function(){var g=this.first();if(!g.hasClass("answer")||!g.hasClass("question"))g=g.closest(".answer, .question");return parseInt(g.find(".vote input")[0].value)}});
StackExchange.newsletterAd=function(){function g(b){b=$('<div id="lightbox-panel" class="popup newsletter-popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(b);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");b.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function e(){var b=
StackExchange.options.site.name,b=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+b+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+b+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',
$("#newsletter-ad .privacy-policy-agreement").parent().html(),"</div>"].join(""));b.find("form").submit(function(){var b=$(this),e=b.find("#newsletter-email-input"),a=b.find("#newsletter-email-submit"),g=$.trim(e.val());if(0==g.length)return!1;StackExchange.helpers.addSpinner(b);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:g},success:function(f){"confirmed"==f.status&&!f.error?(e.attr("disabled",!0),a.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),
$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')):"unconfirmed"==f.status&&!f.error?(e.attr("disabled",!0),a.replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>'),b.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>"),$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')):
b.showErrorMessage(f.error||"there was a problem signing up for the newsletter<br />please try again later")},error:function(){b.showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(b)}});return!1});g(b)}return{init:function(){$("#newsletter-signup").click(function(){var b=$(this);if(StackExchange.options.user.isAnonymous)return e(),!1;StackExchange.helpers.addSpinner("#newsletter-signup-container");
$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(c){c.url?window.location.href=c.url:"confirmed"==c.status?$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>'):"unconfirmed"==c.status?$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>'):b.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},
error:function(){b.parent().showErrorMessage("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var b=$(window).height(),b=Math.min(600,b-100),b=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',b,'px;"><iframe src="',$(this).attr("href"),'&suppressPromotion=true" width="660" height="',b,'" frameborder="0"></iframe></div>'].join("");
g(b);return!1})},loader:function(b,c){var b=c||b,e=$(".newuser-greeting");$.ajax({url:"/newsletter/targetted/ajax",data:{domain:b},success:function(a){$("#newsletter-ad").remove();e.empty().append($(a))},complete:function(){e.attr("class","").attr("style","")}});c||(window.sessionStorage.tNewsletter=b+"-continued")}}}();
(function(g,e,b,c){var i=!("selectionStart"in g("<input type='text' />")[0]);g.fn.caret=function(a,g){var f,j,o=this[0];if("object"===typeof a&&"number"===typeof a.start&&"number"===typeof a.end)f=a.start,j=a.end;else if("number"===typeof a&&"number"===typeof g)f=a,j=g;else if("string"===typeof a)-1<(f=o.value.indexOf(a))?j=f+a[e]:f=null;else if("[object RegExp]"===Object.prototype.toString.call(a)){var h=a.exec(o.value);null!=h&&(f=h.index,j=f+h[0][e])}if("undefined"!=typeof f)return i?(h=this[0].createTextRange(),
h.collapse(!0),h.moveStart("character",f),h.moveEnd("character",j-f),h.select()):(this[0].selectionStart=f,this[0].selectionEnd=j),this[0].focus(),this;if(i)if(j=document.selection,"textarea"!=this[0].tagName.toLowerCase()){h=this.val();f=j[b]()[c]();f.moveEnd("character",h[e]);var d=""==f.text?h[e]:h.lastIndexOf(f.text);f=j[b]()[c]();f.moveStart("character",-h[e]);var l=f.text[e]}else f=j[b](),j=f[c](),j.moveToElementText(this[0]),j.setEndPoint("EndToEnd",f),d=j.text[e]-f.text[e],l=d+f.text[e];else d=
o.selectionStart,l=o.selectionEnd;f=o.value.substring(d,l);return{start:d,end:l,text:f,replace:function(a){return o.value.substring(0,d)+a+o.value.substring(l,o.value[e])}}}})(jQuery,"length","createRange","duplicate");
StackExchange.captcha=function(){return{init:function(g,e){function b(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()}var c=$(['<div id="lightbox-panel" class="popup captcha-popup" style="display: block; text-align: left;"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>',g,"</div>"].join("")),i=c.find("form:first");$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(b);
$.getScript("http://api.recaptcha.net/js/recaptcha_ajax.js",function(){Recaptcha.create(StackExchange.options.site.recaptchaPublicKey,"recaptcha",{theme:"clean",callback:Recaptcha.focus_response_field});StackExchange.helpers.enableSubmitButton(i);i.submit(function(){StackExchange.helpers.disableSubmitButton(i);i.find('input[type="submit"]').addSpinnerAfter();$.ajax({url:"/captcha",type:"POST",dataType:"json",data:i.serialize(),success:function(a){a.captchaError?(StackExchange.helpers.removeSpinner(),
StackExchange.helpers.enableSubmitButton(i),i.find(".form-error").html(a.captchaError),Recaptcha.reload()):(b(),e(a))},error:function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.enableSubmitButton(i);StackExchange.helpers.showErrorMessage(i,"An error occurred submitting the CAPTCHA")}});return!1})})}}}();
StackExchange.gps=function(){function g(){var b;b=localStorage[a];b=!b?[]:JSON.parse(b);if(0<b.length){for(var e=(new Date).getTime(),g=[],h=0;h<b.length;h++){var d=b[h],l=e-d.now;if(0>l||36E5<l||10<h){c(d);return}g.push(d)}0<g.length&&i(g)}}function e(){StackExchange._gps_track&&($.each(StackExchange._gps_track,function(a,c){b(c)}),delete StackExchange._gps_track)}function b(b){var c=localStorage[a];c?(c=JSON.parse(c),c.push(b),localStorage[a]=JSON.stringify(c)):localStorage[a]=JSON.stringify([b])}
function c(b){var c=localStorage[a];if(c){for(var c=JSON.parse(c),b=JSON.stringify(b),e=-1,h=0;h<c.length;h++){var d=JSON.stringify(c[h]);if(b==d){e=h;break}}-1!=e&&(c.splice(e,1),0==c.length?localStorage.removeItem(a):localStorage[a]=JSON.stringify(c))}}function i(a){$.isArray(a)||(a=[a]);$.ajax({type:"POST",url:"/gps/event",data:JSON.stringify(a),success:function(){for(var b=0;b<a.length;b++)c(a[b])}})}var a="gps-pending",k=!1;return{init:function(a){if(k)return!0;k=!0;if(!a||!window.localStorage)return StackExchange.gps.track=
function(){},delete StackExchange._gps_track,!1;e();g();return!0},track:function(a,c,e){c=c||{};a={evt:a,properties:c,now:(new Date).getTime()};b(a);e||i(a)},sendPending:g}}();
StackExchange.openid=function(){function g(a){a&&StackExchange.gps.track("openid.click",{OpenIdProvider:a,oidclick_location:k},!0)}function e(a,c){var e=c.find(".option-extra-fields");e.hide();c.find(".yahoo-button").click(function(){e.hide();b(a,"yahoo")});var d=function(d){var f="."+d+"-option";e.show();e.find("> div:not("+f+")").hide();e.find(f+", .extra-field-container").show();c.find(".extra-field").val("").focus();f=c.find(".extra-field-submit");f.unbind("click");f.click(function(){b(a,d,c.find(".extra-field").val())})};
c.find(".blogger-button").click(function(){d("blogger")});c.find(".aol-button").click(function(){d("aol")})}function b(a,b,c){b=f[b];c&&(b=b.replace("{username}",c));a.find(".use-facebook").val("false");a.find(".manual-openid").val(b);a.find(".submit-openid").click()}function c(a){a.find(".use-facebook").val("true");a.find(".manual-openid").val("");a.find(".submit-openid").click()}function i(a){return function(){StackExchange.using("editor",function(){StackExchange.cardiologist.ensureDraftSaved(a)})}}
function a(a,b,c,d){var e=a.find(".manual-openid").val();a.find(".use-facebook").val();i(function(){var a=$('<form method="post" action="/users/authenticate?returnurl='+encodeURIComponent(b)+'"></form>');if(e){var f=$('<input type="hidden" name="openid_identifier" />');a.append(f);f.val(e)}else{var f=$('<input type="hidden" name="oauth_version" />'),g=$('<input type="hidden" name="oauth_server" />');a.append(f);a.append(g);f.val("2.0");g.val("https://www.facebook.com/dialog/oauth")}a.append("<input type='hidden' name='fkey' value='"+
StackExchange.options.user.fkey+"' />");c&&d&&($('<input type="hidden" name="anon_vote_type" />').val(c).appendTo(a),$('<input type="hidden" name="anon_vote_hash" />').val(d).appendTo(a));StackExchange.navPrevention.stop();a.hide().appendTo("body").submit()})()}var k="unknown",f={yahoo:"http://yahoo.com/",google:"https://www.google.com/accounts/o8/id",aol:"http://openid.aol.com/{username}",blogger:"http://{username}.blogspot.com/"};return{initPostLogin:function(f,o){var h=decodeURIComponent(o);"/questions/ask"===
h&&(k="question_ask");var d=$(f),l=d.find(".new-login-left"),n=d.find(".new-login-right"),q=l.find(".show-more-options");q.click(function(){q.hide();n.show();return!1});n.find(".hide-more-options").click(function(){q.show();n.hide();return!1});d.removeClass("dno");e(d,n);l.find(".google-login").click(function(){g("Google");b(d,"google")});l.find(".facebook-login").click(function(){g("Facebook");c(d)});l.find(".stackexchange-login").click(i(function(){g("Stack Exchange");StackExchange.navPrevention.stop();
window.location="/users/login#create-account"}));d.find(".submit-openid").click(function(){a(d,h)})},initAnonVotePopup:function(e,f,h,d){var l=decodeURIComponent(f);k="votedialog";e.find(".google-login").click(function(){g("Google");b(e,"google")});e.find(".facebook-login").click(function(){g("Facebook");c(e)});e.find(".stackexchange-login").click(function(){g("Stack Exchange");window.location="/users/login#create-account"});e.find(".submit-openid").click(function(){a(e,l,h,d)})}}}();
StackExchange.loggedIn={};
var profileLink=function(){var g,e,b,c=!1,i,a,k,f=!1,j=function(){return $(".profile-link")},o=function(a){a||(a=j());return a.hasClass("profile-link-on")},h=function(a,d){d.toggleClass("profile-link-on",a);$(".profile-triangle").toggleClass("profile-triangle-on",a)},d=function(a){if(!a.data("loading")){a.data("loading",!0);var d=a.find(".profile-stats");d.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(a){$(a).hide().appendTo(d).fadeIn("fast")},error:function(){a.data("loading",
!1)},complete:StackExchange.helpers.removeSpinner})}},l=function(){var a=new Date;a.setTime(a.getTime()+1E3*k);var d=a.getUTCHours(),a=a.getUTCMinutes();10>d&&(d="0"+d);10>a&&(a="0"+a);$(".profile-popup .popup-clock").text("UTC time "+d+":"+a)},n=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){q.cancel()}}),q=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1E3,{always:function(){n.cancel()}}),p=function(a){a.hover(n.trigger,q.trigger)};
return{init:function(a,d,b,h){var l=j(),n=$(".profile-triangle");g=l.attr("href");e=a;c=d;i=b;f="/users/logout"==$(location).attr("pathname");k=h||0;n.click(profileLink.click);d||p(l.add(n));$(document).click(function(a){o(l)&&a.target!=l[0]&&a.target!=n[0]&&!$.contains($(".profile-wrapper")[0],a.target)&&profileLink.hide()})},click:function(){var a=j();q.cancel();n.cancel();o(a)?profileLink.hide():profileLink.show()},show:function(n,k){if(!n||"number"==typeof n)n=j();k||(k=$(".profile-popup"));if(!k.length){var q=
n,u=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"><div class="profile-gravatar"><a href="'+g+'">'+e+'</a><ul class="profile-links"><li><a href="'+i+'">activity</a></li>'+(q.hasClass("child-meta")?"":'<li><a href="/privileges">privileges</a></li>')+(f?"":'<li><a href="/users/logout">log out</a></li>')+'</ul></div><div class="profile-stats"></div><div class="profile-footer"><span class="popup-clock"></span> <a>close</a></div></div></div>');u.insertBefore(q).find(".profile-footer").click(profileLink.click);
c||p(u);k=u}o(n)||(k.fadeIn("fast"),d(k),h(!0,n),a=new Date);b||(b=setInterval(l,2E4),l())},hide:function(d,c){if(a&&!(500>(new Date).getTime()-a.getTime())){if(!d||"number"==typeof d)d=j();c||(c=$(".profile-popup"));o(d)&&(c.fadeOut("fast"),h(!1,d));b&&(clearInterval(b),b=null)}}}}();
StackExchange.tagPreferences=function(){function g(a,d,b){var c="";"undefined"!=typeof forUserId&&(c=forUserId);$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:a,value:d,forUserId:c},b)}var e=[],b=$('<table><tr><td class="vt"><input id="interestingTag" type="text" name="interestingTag"></td>                             <td class="vt"><input id="interestingAdd" type="button" value="Add"></td> </tr></table>'),c=$('<table><tr><td class="vt"><input id="ignoredTag" type="text" name="ignoredTag"></td>                             <td class="vt"><input id="ignoredAdd" type="button" value="Add"></td> </tr></table>'),
i=function(a,d){return a.map(function(a,d){return $(d).text()}).filter(function(a,b){if(!d)return!0;var c;/\*/.test(b)&&(c=RegExp(b.replace(/([.+])/g,"\\$1").replace(/\*/g,".*")));for(a=0;a<d.length;a++){var e=d[a];if(b===e||c&&c.test(e))return!1}return!0}).map(function(a,d){var b;b=d.replace(/#/g,"\u00f1").replace(/\+/g,"\u00e7").replace(/\./g,"\u00fb");return/\*/.test(b)?"div.tags:regex(class, t-"+b.replace(/\*/g,".*")+")":"div.t-"+b}).get().join(",")},a=function(a,d,b,c,e,h){for(var l=$(a).val(),
i=sanitizeAndSplitTags(l,!0),n=!1,j=0;j<i.length;j++)0!=$.trim(i[j]).length&&($(d).children().each(function(){$(this).text()==i[j]&&($(this).fadeTo(500,0.1).fadeTo(500,1),n=!0)}),n||(l=$.URLEncode(i[j]),$(d).append('<a id="'+i[j]+'" href="/questions/tagged/'+l+'" class="'+c+'" title="show questions tagged \''+i[j]+"'\">"+i[j]+"</a> "),k(b)),n=!1);$(a).val("");e&&$(a).focus();h||g(b,$(d).text());f()},k=function(a){$(20==a?"#interestingTags > .post-tag:last":25==a?"#ignoredTags > .post-tag:last":40==
a?"#interestingTags > .post-tag":45==a?"#ignoredTags > .post-tag":"#interestingTags > .post-tag, #ignoredTags > .post-tag").append('<span class="delete-tag" title="remove this tag"></span>').click(function(a){a=$(a.target);if(a.is("[class^=delete-tag]")){var a=a.closest(".post-tag"),d=a.closest("div"),b=d.is("#ignoredTags")?25:20;a.remove();g(b,d.text());f();return!1}})},f=function(a,d){if(d)for(var b=0;b<d.length;b++)-1==e.indexOf(d[b])&&e.push(d[b]);var d=e,b=$("#ignoredTags > a"),c=$("#interestingTags > a");
if(!a||!(0==b.length&&0==c.length)){$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");b=i(b,d);c=i(c,d);if(0<b.length){var f=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(b).closest("div.question-summary").addClass(f)}0<c.length&&$(c).closest("div.question-summary").addClass("tagged-interesting");$("div.question-summary a.post-tag").removeClass("selected");$("#explore-tags a.post-tag.selected").each(function(a,d){var b=$(d).text();
$("div.question-summary a.post-tag").filter(function(){return $(this).text()==b}).addClass("selected")})}},j=function(d,b){var c=$("#tag-menu"),e;"favorite"==b&&(e=$("#ignoredTags a").filter(function(){return $(this).text()==d}),e.add(e.next()).remove(),$("#interestingTag").val(d),a("#interestingTag","#interestingTags",20,"post-tag",!1,!0));"ignore"==b&&(e=$("#interestingTags a").filter(function(){return $(this).text()==d}),e.add(e.next()).remove(),$("#ignoredTag").val(d),a("#ignoredTag","#ignoredTags",
25,"post-tag",!1,!0));"clear"==b&&(e=$("#ignoredTags a").filter(function(){return $(this).text()==d}),e.add(e.next()).remove(),e=$("#interestingTags a").filter(function(){return $(this).text()==d}),e.add(e.next()).remove(),f());StackExchange.helpers.addSpinner(c);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(d)+"/favorite",data:{action:b,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(a){h(c.html($(""+a)),d)},error:function(){},complete:StackExchange.helpers.removeSpinner})},
o=function(a,d){var b=$("#tag-menu");StackExchange.helpers.addSpinner(b);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(a)+"/subscription",data:{unsubscribe:d,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(d){h(b.html($(""+d)),a)},error:function(){},complete:StackExchange.helpers.removeSpinner})},h=function(a,d){a.find(".tm-se-subscription").click(function(){o(d,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){$(this).hasClass("tm-favorite")?
j(d,"ignore"):$(this).hasClass("tm-favorite-clear")?j(d,"favorite"):$(this).hasClass("tm-favorite-ignore")&&j(d,"clear")})},d=function(d){d&&k(40);$("#add-interesting").append(b);b.find("#interestingAdd").click(function(){a("#interestingTag","#interestingTags",20,"post-tag user-tag",!0);$("#tag-subscriptions").removeClass("dno")});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#interestingTag")});p()},l=function(d){d&&k(45);$("#add-ignored").append(c);c.find("#ignoredAdd").click(function(){a("#ignoredTag",
"#ignoredTags",25,"post-tag user-tag",!0)});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag")});p()},n=function(a){if($.contains(document.documentElement,a.target)&&!$(a.target).closest("#interesting-tags").length){var a=0<$("#interestingTags > .post-tag").length,d=0<$("#ignoredTags > .post-tag").length;a?($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno").addClass("dno")):
($("#add-interesting table").remove(),$("#edit-interesting").removeClass("dno").addClass("dno"),$("#tag-subscriptions").removeClass("dno").addClass("dno"),$("#addInterestingTag").removeClass("dno"));d?($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno"),$("#addIgnoredTag").removeClass("dno").addClass("dno")):($("#add-ignored table").remove(),$("#edit-ignored").removeClass("dno").addClass("dno"),$("#addIgnoredTag").removeClass("dno"));$("#interesting-tags .delete-tag").remove();
$(document).off("click",n)}},q=function(){$("#addInterestingTag").on("click",function(){$(this).addClass("dno");d(!1)});$("#addIgnoredTag").on("click",function(){$(this).addClass("dno");l(!1)});$("#edit-interesting").on("click",function(){$(this).addClass("dno");$("#tag-subscriptions").removeClass("dno");d(!0)});$("#edit-ignored").on("click",function(){$(this).addClass("dno");l(!0)})},p=function(){$(document).on("click",n)};return{applyPrefs:f,isIgnored:function(a){var d=$("#ignoredTags > a");if($("#hideIgnored").is(":checked")&&
(d=i(d,!0),0<d.length))return 0<$(a).find(d).length},init:function(){StackExchange.tagmenu.init(h);0!=$("#interestingTags").length&&(StackExchange.options.site.useNewStyleFavoriteTagsEditor?(q(),p()):(k(),$("#ignoredAdd").click(function(){a("#ignoredTag","#ignoredTags",25,"post-tag user-tag",!0)}),$("#interestingAdd").click(function(){a("#interestingTag","#interestingTags",20,"post-tag user-tag",!0)}),StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag");bindTagFilterAutoComplete("#interestingTag")})),
$("#hideIgnored").click(function(){g(30,$(this).is(":checked"));f()}))}}}();
StackExchange.question.fullInit=function(g){window.votesCast=g.votesCast;StackExchange.vote.init(g.questionId);StackExchange.question.bindSuggestedEditPopupLinks();g.canViewVoteCounts&&StackExchange.vote.bindFetchVoteCounts();StackExchange.vote_bounty.init(g);if(/^#autocomment/.test(window.location.hash)){var e=$(".comments-link:first"),b="#comment-"+window.location.hash.substring(12),c=function(){var c=$(b),a=$("<span><b>Trivial answer converted to comment</b></span>");c.find(".comment-date").append($("<br>")).append(a);
c.css({backgroundColor:g.highlightColor});c.animate({backgroundColor:g.backgroundColor},2E3,"linear",function(){$(this).css("background-color","")});$(b)[0].scrollIntoView(!0)};g.totalCommentCount&&g.shownCommentCount&&g.totalCommentCount!=g.shownCommentCount?StackExchange.comments.loadAll(e).done(c):c()}};
StackExchange.question.bindSuggestedEditPopupLinks=function(){function g(e){var b=e.parent(),c=e.attr("id").substring(13);e.data("working")||(e.data("working",!0).addSpinnerAfter({padding:"3px 0"}),$.ajax({type:"GET",url:"/review/suggested-edit-popup/"+c,dataType:"html",success:function(c){var c=$(['<div id="lightbox-panel" class="popup" style="display: block;"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><div class="popup-suggested-edit">',c,"</div></div>"].join("")),
a=$(window).height();c.find(".popup-suggested-edit").css({"max-height":a-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");c.appendTo(b).css("height","600px").center().css("height","").fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})},error:function(c){b.showErrorMessage(c.responseText&&200>c.responseText.length?c.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();
e.removeData("working")}}))}$('div.post-menu a[id^="edit-pending-"]').each(function(){$(this).unbind("click").click(function(){g($(this));return!1})})};
StackExchange.vote=function(){function g(a){return!a?null:parseInt(a.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var e=StackExchange.helpers,b={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12},c=function(a){a||(a="div.vote");$(a).find(".vote-up-off").unbind("click").click(function(){f($(this))});$(a).find(".vote-down-off").unbind("click").click(function(){j($(this))})},i=function(a){return(a?
a.closest("div.vote"):$("div.vote")).find(".vote-up-off, .vote-down-off").unbind("click")},a=function(a){$.each(a,function(){var a=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case b.upMod:a.find(".vote-up-off").addClass("vote-up-on");break;case b.downMod:a.find(".vote-down-off").addClass("vote-down-on");break;case b.favorite:a.find(".star-off").addClass("star-on");a.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+
this.VoteTypeId)}});votesCast=null},k=function(d){null==window.votesCast?$.ajax({type:"GET",url:"/posts/"+d+"/votes",dataType:"json",success:a}):a(window.votesCast);c()},f=function(a){var c=a.parent().find(".vote-up-off"),e=a.parent().find(".vote-down-off"),f=c.hasClass("vote-up-on"),g=e.hasClass("vote-down-on");l(a,f?-1:g?2:1);d(c,e);f||c.addClass("vote-up-on");c=f?b.undoMod:b.upMod;i(a);e=h(a);n(a,e,c,q)},j=function(a){var c=a.parent().find(".vote-up-off"),e=a.parent().find(".vote-down-off"),f=
e.hasClass("vote-down-on"),g=c.hasClass("vote-up-on");l(a,f?1:g?-2:-1);d(c,e);f||e.addClass("vote-down-on");c=f?b.undoMod:b.downMod;i(a);e=h(a);n(a,e,c,q)},o=function(){return $("div.vote a[id^='vote-accepted-']")},h=function(a){return a.closest("div.vote").find("input").val()},d=function(a,d){a.removeClass("vote-up-on");d.removeClass("vote-down-on")},l=function(a,d){var b=a.siblings("span.vote-count-post"),c;if(0<b.find(".vote-count-separator").length){c=parseInt(b.children(":first").text(),10);
var e=Math.abs(parseInt(b.children(":last").text(),10));c-=e;z(b)}else c=parseInt(b.text(),10);b.text(c+d)},n=function(a,d,b,c,e,f){var g={fkey:StackExchange.options.user.fkey};if(e)for(var h in e)g[h]=e[h];var l=function(){$.ajax({type:"POST",url:"/posts/"+d+"/vote/"+b,data:g,dataType:"json",success:function(b){b.Warning?confirm(b.Message)?(g.ignoreWarnings="true",l()):f&&f():(c(a,d,b),f&&f())},error:function(){a.parent().showErrorMessage("An error has occurred - please retry your request.");f&&
f()}})};l()},q=function(a,e,f){if(f.Success){f.Message&&a.parent().showInfoMessage(f.Message);if(f.ShowShareTip){var g=$(a).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(g)}f.LastVoteTypeId==b.upMod?$(document).trigger("upVote",e):f.LastVoteTypeId==b.downMod?$(document).trigger("downVote",e):$(document).trigger("undoVote",e)}else if(window.console&&window.console.firebug&&(!f.Message||5>f.Message.length))a.parent().showErrorMessage("FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.");
else if(f.Message?a.parent().showErrorMessage(f.Message,{"transient":!0}):a.parent().showErrorMessage("An error has occurred - please retry your request."),d(a,a),a.parent().find("span.vote-count-post").text(f.NewScore),f.LastVoteTypeId){var e=f.LastVoteTypeId,h;e==b.upMod?(g=".vote-up-off",h="vote-up-on"):e==b.downMod&&(g=".vote-down-off",h="vote-down-on");g&&a.closest("div.vote").find(g).addClass(h)}c(a.parent())},p=function(){$(".star-off:not(.disabled)").live("click",function(a){t($(this));a.preventDefault()})},
t=function(a){if(!a.data("loading")){a.data("loading",!0);var d=h(a)||a.siblings("input[type=hidden]").val(),c=a.parent().find("div.favoritecount b"),e=parseInt("0"+c.text().replace(/^\s+|\s+$/g,""),10),f=function(){a.hasClass("star-on")?(a.removeClass("star-on"),c.removeClass("favoritecount-selected").text(0>=e--?"":e)):(a.addClass("star-on"),c.addClass("favoritecount-selected").text(++e))};f();n(a,d,b.favorite,function(d,b,c){a.data("loading",!1);c.Success||(f(),a.parent().showErrorMessage(c.Message))})}},
r=function(a,d){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(c){c.preventDefault();var c=$(this),e=c.attr("id").substring(12),f=-1<c.text().indexOf("undelete"),h=g(c.closest("td").siblings(".post-signature").last().find(".user-details a").attr("href")),l="Vote to "+(f?"un":"")+"delete this post?";h==y&&(l=(f?"Und":"D")+"elete this post?");confirm(l)&&n(c,e,f?b.undeletion:b.deletion,a||u,d)}).unbind("hover").die("hover").live("hover",
function(){var a=$(this);if(a.hasClass("load-tooltip-on-hover")){a.removeClass("load-tooltip-on-hover");var d="/posts/"+a.attr("id").substring(12)+"/delete-tooltip";$.get(d,function(d){a.attr("title",d)})}})},y=g($("#hlinks a.profile-link").attr("href")),u=function(a,d,b){var c=-1<a.text().indexOf("undelete");b&&b.Success?(a.text(b.Message),a.addClass("load-tooltip-on-hover"),0>b.NewScore?(a=0<$(".question:has(a[id='delete-post-"+d+"'])").length?".question, div.answer":"#answer-"+d,a=$(a),c?document.location.reload(!0):
($("div.question-status:has(span:contains('delete'))").show(),a.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted"))):a.parent().showInfoMessage("Your "+(c?"un":"")+"delete vote has been recorded")):(c=b&&b.Message?b.Message:"A problem occurred during "+(c?"un":"")+"deletion",e.showErrorMessage(a.parent(),c))},v=function(){var a=
$(this),d=a.attr("id").substring(14),c=o();a.is(":working")||(a.parent().addSpinner(),c.working(!0),n(a,d,b.acceptedByOwner,function(d,e,f){f.Success?(c.removeClass("vote-accepted-on"),parseInt(f.Message,10)==b.acceptedByOwner&&a.addClass("vote-accepted-on")):a.parent().showErrorMessage(f.Message);a.parent().removeSpinner();c.working(!1).trigger("update")}))},x=function(){var a=$(this),d=(a.hasClass("vote-accepted-on")?"un":"")+"accept";a.attr("title",a.data("title-"+d)).text(a.data("verb-"+d))},
s=!1,w=function(a){if(!s){s=!0;var d=a.closest("div.vote").children('input[type="hidden"]').val();a.addSpinner();$.ajax({type:"GET",url:"/posts/{postId}/vote-counts".format({postId:d}),dataType:"json",success:function(d){StackExchange.helpers.removeMessages();a.html('<div style="color:green">'+d.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+d.down+"</div>").unbind("click").data("bound",!1).css("cursor","default").attr("title",Math.abs(+d.up)+" up / "+Math.abs(+d.down)+
" down")},error:function(d){a.removeSpinner().parent().showErrorMessage(d.responseText&&100>d.responseText.length?d.responseText:"An error occurred during vote count fetch")},complete:function(){s=!1}})}},z=function(a){(a||$(".vote-count-post")).not(".mobile-vote-count").not(":data(bound)").attr("title","View upvote and downvote totals").css("cursor","pointer").click(function(){w($(this))}).data("bound",!0)},A=function(a){k(a);$("div.post-menu a[id^='protect-post-']").unbind("click").click(function(a){a.preventDefault();
a=this.id.substring(13);confirm("Are you sure you want to protect this question?")&&$.ajax({type:"POST",url:"/question/protect",data:{id:a,fkey:StackExchange.options.user.fkey},success:function(){location.reload(!0)}});return!1});$("div.post-menu a[id^='unprotect-post-']").unbind("click").click(function(a){a.preventDefault();a=this.id.substring(15);confirm("Are you sure you want to unprotect this question?")&&$.ajax({type:"POST",url:"/question/unprotect",data:{id:a,fkey:StackExchange.options.user.fkey},
success:function(){location.reload(!0)}});return!1});StackExchange.vote_closingAndFlagging.init();p()};return{init:function(a){!StackExchange.options.user.isRegistered?StackExchange.question.bindAnonymousVoteDisclaimers():A(a);o().not(":data(bound)").on({click:v,update:x}).data("bound",!0).trigger("update");StackExchange.question.bindFetchAcceptedAnswerDates();r()},up:f,down:j,vote_init:k,favorite_init:p,delete_init:r,bindFetchVoteCounts:z,highlightExistingVotes:a,submit:n,voteTypeIds:b,getPostId:h}}();
StackExchange.vote_closingAndFlagging=function(){var g=StackExchange.vote.voteTypeIds,e,b=function(a,d){var b=$(".popup-title-container .popup-breadcrumbs");b.children().hide();$("<a>").text(a).click(function(){b.find(":visible").remove();b.find("a:last, .arrow:last").show();d()}).appendTo(b);$("<span>").addClass("arrow").html("&gt;").appendTo(b)},c=function(a,d){b("Flagging",function(){a.fadeOut("fast");d.fadeIn("fast")})},i=function(d,b,c,e){$("#close-question-popup").remove();var f=d.closest(".post-menu");
f.length||(f=d.parent());c||d.addSpinnerAfter({padding:"0 3px"});$.ajax({type:"GET",url:"/posts/popup/close/"+b+(c?"?isForFlagging=1":""),dataType:"html",success:function(b){var b=$(b).elementNodesOnly(),c=null;e&&(c=e.offset(),e.fadeOut("fast"),q=b);b.appendTo(f);a(b,d,e);c?b.offset(c).show():b.center().fadeIn("fast")},error:function(a){a.responseText?f.showErrorMessage(a.responseText):f.showErrorMessage("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},
a=function(a,d,e){h();a.find(".popup-close").click(function(){a.fadeOutAndRemove();e&&e.remove()});e&&c(a,e);var g=a.find(".popup-submit");a.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var d=$(this),c=d.closest("li");if(!c.hasClass("action-selected")){var d=d.attr("id").substr(6),e=$("#pane"+d);0==e.length?d=null:($("#pane-main").removeClass("popup-active-pane").hide(),k(e),e.addClass("popup-active-pane").show().asyncLoad(),b("Closing",h),window["pane"+d](),d=e);d||
(g.enable(),a.find(".popup-active-pane li.action-selected").removeClass("action-selected"),c.addClass("action-selected"))}});f();$("#close-question-form").submit(function(){j(a,d,$(this),g);return!1})},k=function(a){$(".popup-title-container .popup-title").html(a.data("title"))},f=function(){var a=$(".close-as-duplicate-pane").find("#search-text");a.helpOverlay().typeWatch({highlight:!1,wait:750,captureLength:-1,callback:function(){n(a)}})},j=function(a,d,b,c){if(!c.attr("disabled")){$("#remaining-votes").addSpinner({position:"absolute",
margin:"3px 0 0 5px"});c.disable();var e=0<a.find("input[name=isForFlagging]").length,f=$("#original-question-id").val();$.ajax({type:"POST",url:b.attr("action"),dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:e,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked, input#migrate-anywhere:checked').val(),"original-question-id":f},success:function(a){o(d,questionId,a,e,!!f)},error:function(){d.parent().showErrorMessage(-1<
"A problem occurred when trying to "+d.text().indexOf("open")?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();a.fadeOutAndRemove()}})}},o=function(a,d,b,c,f){a&&a.parent().removeSpinner();!c&&a.is("[id^='flag-post-'], [id^='mobile-flag-post-']")&&(a=a.parent().find("a[id^='close-question'], a[id^='mobile-close-post-']"));d=a&&-1<a.text().indexOf("open")?"reopen":"close";if(b.Success){if(!e||!e.closeCallback||!e.closeCallback(a,b,c))if(b.Message){var g=a.parent();c?g.showInfoMessage(b.Message):
(a.text(a.text().replace(/\w?\(\d(\/\d)?\)/,"")+" "+b.Message),a.addClass("load-tooltip-on-hover"),g.showInfoMessage("Your "+d+" vote has been recorded"));f&&(a.closest(".mod-post-header").length||StackExchange.comments.loadAll(a))}else b.RedirectTo?location.href=b.RedirectTo:location.reload(!0)}else if(c=b.Message||"A problem occurred when trying to "+d,!e||!e.closeErrorCallback||!e.closeErrorCallback(c))a.parent().showErrorMessage(c),b.Refresh&&setTimeout(function(){location.reload(!0)},2500)},
h=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();var a=$("#pane-main");a.addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");k(a);$(".popup").find(".popup-submit").disable()},d=function(a){a=a.find(".list-originals");0==a.children().length?a.hide():(a.show(),l(a,!0),styleCode(),a.find(".item").click(function(){var a=$(this).find(" .post-link > a").addSpinner({"padding-left":"3px"}),
d=$("#search-text").hideHelpOverlay().val(a.attr("href"));n(d,a);return!1}).hover(function(){$(this).toggleClass("hover")}))},l=function(a,d){var b=$(".close-as-duplicate-pane .original-display").find(".navi-container"),c=a.find(".navi"),e=$("#search-text");if(d)b.empty();else{var f=b.find(".navi");if(1!=f.length)return;f.empty();$("<a>").text(f.data("abbr")).click(function(){f.html(f.data("text")).siblings().remove();b.siblings(".preview").hide();b.siblings(".list-container").show();$("#original-question-id").val("");
$("#close-question-popup").find(".popup-submit").disable();$(".close-as-duplicate-pane").find(".search-errors").empty();e.val(f.data("search-text")).focus()}).appendTo(f)}c.data("search-text",e.val()).text(c.data("text")).prependTo(b)},n=function(a,b){var c=a.closest(".popup-subpane"),e=c.find(".preview"),f=c.find(".list-container"),g=c.find(".search-errors").empty(),h=$("#original-question-id"),i=c.closest("#close-question-popup").find(".popup-submit");i.disable();e.html("").hide();0!=$.trim(a.val()).length&&
(b||c.find(".search-spinner").addSpinner(),$.ajax({type:"GET",url:"/posts/popup/close/search-originals/"+questionId,data:{q:a.val()},dataType:"html"}).done(function(a){a=$(a).elementNodesOnly().mathjax();if(a.hasClass("show-original"))f.hide(),l(a),e.empty().append(a).show(),a.find(".question .show-title a").attr("target","_blank"),a.find(".post-tag").addClass("user-tag"),h.val(a.find(".question").data("questionid")),i.enable();else if(a.hasClass("list-originals"))f.empty().append(a).show(),d(f);
else throw"these are not the results you were looking for";}).fail(function(a){g.text(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred while searching; please try again");i.disable();h.val("");c.find(".navi-container .instructions").remove()}).always(function(){StackExchange.helpers.removeSpinner()}))},q,p,t=function(a){q&&(q.remove(),q=null);y(a);a.find("form").submit(function(){v(a);return!1});$("#flag-load-close").unbind("click").click(function(){if(p)p(a,$(this));else{var d=
$(this);d.closest("li").siblings("li").trigger("hide-action");if(q)c(q.fadeIn("fast"),a.fadeOut("fast"));else{d.siblings(".action-name").addSpinner({margin:"0 5px"});var b=a.attr("id").substr(11),e=$("#flag-post-"+b),f="true"==$("#flag-isClosePopupForFlagging").val();i(e,b,f,a)}a.find(".popup-submit").disable();d.removeAttr("checked")}})},r=function(a){a=a.find("input:radio").attr("id").substr(5);a=a==g.offensive||a==g.spam;$(".flag-remaining-spam").toggle(a);$(".flag-remaining-inform").toggle(!a)},
y=function(a){var d=a.find(".popup-submit"),b=a.find('textarea[name="flag-reason"]');b.focus(function(){b.hideHelpOverlay();var a=b.closest("li").find("input:radio");a.is(":checked")||a.attr("checked","checked")}).charCounter({min:10,max:500,setIsValid:function(a){var c=b.closest("li").find("input[type=radio][value=other]").is(":checked"),e=b.closest("li").parent().closest("li").hasClass("action-selected");c&&e&&d.enable(a)}});a=b.closest(".action-subform");a.find("input.flag-prefilled").click(function(){d.enable()});
a.find('input[value="other"]').click(function(){b.focus()});a.find("label, input:radio").css("cursor","pointer")},u=function(a){if(a.is(".mod-attention-subform")){var d=a.find('textarea[name="flag-reason"]');d.helpOverlay();a.find("input[value=other]:checked").length?d.focus():a.find("input:radio:checked").length||a.closest(".popup").find(".popup-submit").disable()}},v=function(a){a.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var d=a.attr("id").substr(11),b=$("#flag-post-"+
d),c=a.find('input[name="flag-post"]:checked').val();c==g.informModerator?x(a,d,b):StackExchange.vote.submit(b,d,c,s,null,function(){a.fadeOutAndRemove()})},x=function(a,d,b){var c=a.find(".mod-attention-subform"),f=c.find("input:radio:checked"),c="other"==f.val()?c.find('textarea[name="flag-reason"]').val():f.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+d,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:c},success:function(a){(!e||!e.flagCallback||!e.flagCallback(b,
a))&&b.parent().showInfoMessage(a.Message)},error:function(a){b.parent().showErrorMessage(a.responseText&&100>a.responseText.length?a.responseText:"An error occurred during submission")},complete:function(){a.fadeOutAndRemove()}})},s=function(a,d,b){if(!e||!e.flagCallback||!e.flagCallback(a,b))b.Refresh?location.reload(!0):a.parent().showInfoMessage(b.Message)};return{on_close_click:function(a){p=a},flag_actionSelected:r,flag_subformShow:u,close_initPopup:a,flag_loaded:t,close_afterLoadListOriginals:d,
init:function(a){e||(e=a);var d=$("div.post-menu a[id^='close-question-'], table.flagged-posts input[id^='close-question-']");d.unbind("click").die("click").live("click",function(a,d){a.preventDefault();var b=$(this),c=!!d,e=-1<b.text().indexOf("open"),f=b.attr("id").substring(15);if(e){if(c||confirm("Nominate this question for reopening?"))b.addSpinnerAfter({padding:"0 3px"}),StackExchange.vote.submit(b,f,g.reopen,o)}else c="true"==$("#close-isClosePopupForFlagging").val(),i(b,f,c)});d.unbind("hover").die("hover").live("hover",
function(){if(d.hasClass("load-tooltip-on-hover")){d.removeClass("load-tooltip-on-hover");var a="/posts/"+d.attr("id").substring(15)+"/close-tooltip";$.get(a,function(a){d.attr("title",a)})}});$("div.post-menu a[id^='flag-post-'], div.flag-options .flag-post").unbind("click").die("click").live("click",function(a){a.preventDefault();var a=$(this),d=a.attr("id").substring(10);a.loadPopup({url:"/posts/popup/flag/"+d+(a.hasClass("show-invalid")?"?showInvalid=true":""),loaded:t,hideDescriptions:!0,actionSelected:r,
subformShow:u})})}}}();
(function(){function g(a,b){this.commentId=a;this.jComment=b;this.postUi=k(b)}function e(a){var a=a.constructor===$?a:$(a),a=a.hasClass("comment")?a:a.closest(".comment"),b=a.attr("id").replace(/^comment-/,"");return new g(b,a)}function b(a,b,c){/Android/.test(navigator.userAgent)&&$(b,a).bind("touchstart",function(a){a=$(a.target);if(!a.is(c))return!0;var d=a.data("events");if(d&&d.click&&d.click.length)return!0;a.click(function(){}).attr("data-nothing-to-see-here","X");return!0})}function c(a,c,
f){$(".comments",a).delegate(c,"click",function(){e(this)[f]()});b(a,".comments",c)}var i,a=StackExchange.comments,k=a.uiForPost;a.extendPostUi({ensureInput:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),b=this;return a.children().length?(a.add(a.prev()).show(),a.find("textarea")):j(a,"Add Comment",!1,function(){b.submitNewComment()})},saveEditingComments:function(a){var b=this.editingComments=[];this.jDiv.find("form[id^='edit-comment-']:visible").each(function(){var c=e(this);if(c.commentId!==
a){var f=$(this).find("textarea");b.push([c.commentId,f.val()])}})},restoreEditingComments:function(){this.editingComments&&($.each(this.editingComments,function(a,b){var c=b[1],f=$("#comment-"+b[0]);f.length&&e(f).edit(c,!0)}),delete this.editingComments)},commentsShown:function(){try{var a=this.jDiv.find("form[id^='add-comment-'] textarea:focus");a.length&&StackExchange.comments.tabCompleter.init(a);this.jCommentsLink.data("comments-count",0)}catch(b){}},submitNewComment:function(){var a=this.jDiv.find('form[id^="add-comment-"]'),
b=a.find("textarea"),c=this,e=a.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:b.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",e).done(function(e){c.showComments(e);b.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(a);a.add(a.prev()).hide();c.jCommentsLink.show();$(document).trigger("comment",c.postId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},checkDiscussion:function(){var a=
this.jDiv.find("tr.is-comment-discussion"),b=this;if(a.length){a.remove();var c=this.jDiv.find(".comment-form");c.find(".discussion-info").length||($("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(a){$(this).unbind("click");a.preventDefault();b.ajax({url:"/posts/"+b.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},
type:"POST"},"when trying to move the discussion to chat",c).done(function(a){a.success?window.location.href=a.message:StackExchange.helpers.showErrorPopup(c,a.message)})}).end().prependTo(c),a.remove())}}});g.prototype={undoVoteUp:function(){if(confirm("Are you sure you want to undo your upvote on this comment? You will not be able to upvote it again.")){var a=this.jComment.find(".comment-up-on").addClass("comment-up comment-up-off").removeClass("comment-up-on comment-up-undo"),b=this;this.submitVote(0).done(function(c){c.Success?
(a.closest("tr").siblings("tr").show(),b.renderScore(c.NewScore),a[0].title="this comment adds something useful to the post",$(document).trigger("undoUpVoteComment",b.postUi.postId)):a.removeClass("comment-up-off comment-up").addClass("comment-up-on")}).fail(function(b){409===b.status&&a.addClass("comment-up-undo");a.removeClass("comment-up").addClass("comment-up-on")})}},voteUp:function(){var a=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),b=this;this.submitVote(2).done(function(c){c.Success?
(a.removeClass("comment-up-off").closest("tr").siblings("tr").hide(),a.addClass("comment-up-undo"),b.renderScore(c.NewScore),a[0].title="you've voted for this as a useful comment (click again to undo)",$(document).trigger("upVoteComment",b.postUi.postId)):a.removeClass("comment-up-on").addClass("comment-up")}).fail(function(){a.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var a=this;confirm("Really delete this comment?")&&this.submitVote(10).done(function(b){b.Success&&
(0===a.jComment.siblings(".comment").length&&a.jComment.closest(".comments").addClass("dno"),a.jComment.remove())})},flag:function(){var a=this;this.jComment.find(".comment-flag").loadPopup({url:"/posts/comments/popup/flag/"+this.commentId,loaded:function(b){var c=b.find("#comment-popup-other-text").charCounter({min:6,max:200,setIsValid:function(){g()}}),e=b.find("#comment-popup-other").click(function(){g();c.focus()}),f=b.find(".text-counter"),g=function(){var a=0==b.find('input[name="comment-reason"]:checked').length;
e.is(":checked")?(a=c.show().val().length,f.show(),a=6>a||200<a):(c.hide(),f.hide());b.find(".popup-submit").attr("disabled",a)};b.find("input").click(g);g();b.find("form").submit(function(){var f=(e.is(":checked")?c:b.find('input[name="comment-reason"]:checked')).val();b.fadeOutAndRemove();a.submitVote(4,f).done(function(b){b.Success&&(-1===b.NewScore?a.jComment.remove():a.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove())});return!1})}})},edit:function(a,b){var c=this.jComment,e=c.find('form[id^="edit-comment-"]'),
f=this;e.length&&(c.find(" > td > *").not(e).hide(),c.find("td:last").addClass("comment-form"),c=j(e,"Save Edits",!0,function(){f.submitEdit()}),c.val(a||e.find("div").text()),e.show(),b||c.focus())},cancelEdit:function(){var a=this.jComment,b=a.find('form[id^="edit-comment-"]');b.children("table").remove();b.hide();b.unbind("submit");a.find("td:last").removeClass("comment-form");a.find(" > td > *").not(b).show()},submitEdit:function(){var a=this.jComment.find('form[id^="edit-comment-"]'),b=this;
this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:a.find("textarea").val(),fkey:StackExchange.options.user.fkey}},"during comment submission",a).done(function(a){b.postUi.showComments(a,b.commentId)}).fail(function(){StackExchange.helpers.enableSubmitButton(a)})},submitVote:function(a,b){var c=this.jComment.find("td:first");return this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/vote/"+a,dataType:"json",data:{fkey:StackExchange.options.user.fkey,
text:b},success:function(a){!a.Success&&a.Message&&StackExchange.helpers.showErrorPopup(c,a.Message)}},"during voting",c,!0)},renderScore:function(a){var b="";a&&0<a&&(b+='<span title="number of \'useful comment\' votes received" class="'+(5>a?"":15>=a?"warm":30>=a?"hot":"supernova")+'">'+a+"</span>");this.jComment.find(".comment-score").html(b)}};var f=function(a){a.find("textarea").keyup(function(b){13==b.which&&!b.shiftKey&&!$(this).prev("#tabcomplete:visible").length&&a.submit()}).keypress(function(a){if(13==
a.which&&!a.shiftKey)return!1})},j=function(a,b,c,g){b=a.hasClass("mobile-comment-form")?'<textarea name="comment" rows="2"></textarea><input type="submit" value="'+b+'"/>':'<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+b+'"/>'+(c?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>';
a.append(b);c&&a.find(".edit-comment-cancel").click(function(){e(a).cancelEdit()});var h=!1,c=a.find("textarea");c.charCounter({min:15,max:600,setIsValid:function(a){h=a}}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});a.find(".comment-help-link").click(o);if(i)c.one("focus",o);a.submit(function(){h?(StackExchange.helpers.disableSubmitButton(a),g(a)):a.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)});return!1});StackExchange.options.desc||
f(a);return c},o=function(a){var b=$(this).closest("tbody"),c=b.find(".comment-help-link"),e=$(".comment-help",b),f;if("click"==a.type)f=0==e.length||!e.is(":visible"),f||(o.manualOnly=!0);else{if(o.manualOnly)return;f=!0}var g=function(){c.text(f?"hide help":"help")};0<e.length?f?e.slideDown(g):e.slideUp(g):f&&(a=$("<tr />").appendTo(b),a=$("<td colspan='2' />").appendTo(a),o.helpText?(a.html(o.helpText),$(".comment-help",a).slideDown(g)):(StackExchange.helpers.addSpinner(c),a.load("/posts/comment-help",
function(a){o.helpText=a;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(g)})))},h=a.init;a.init=function(a){h(a);i=a&&a.autoShowCommentHelp;a=a&&a.post||document;c(a,".comment-up","voteUp");c(a,".comment-delete","delete");c(a,".comment-flag","flag");c(a,".comment-edit","edit");c(a,".comment-up-undo","undoVoteUp");$("form.comment-form-expanded",a).each(function(){k(this).addShow(!0)})}})();
StackExchange.comments.tabCompleter=function(){function g(a){var b=$("#tabcomplete");b.empty();!(5<a.length)&&a.length&&$.each(a,function(a,c){var e=$("<li/>").text(c).appendTo(b);c.toLowerCase()==j.toLowerCase()&&e.addClass("chosen")})}function e(){var a=f.caret().start,b=f.val(),c=!1;if(/@[^\s!?();:+"].*@/.test(b)){if(!/`/.test(b))return null;c=!0}var e=b.substring(a).search(/[\s!?();:+"\[\]\\]/);-1==e&&(e=b.length-a);var g=b.substring(0,a+e).match(/@[^\s!?();:+"\[\]\\]*$/);if(!g)return null;var g=
g[0].substr(1),e=a+e,i=e-g.length;return c&&/@[^\s!?();:+"]/.test(b.substr(0,i-1))?null:{start:i,pos:a,end:e,name:g}}function b(a){var b=e();if(b.name===a)f.is(":focus")||f.focus();else{var c=f.val();f.val(c.substring(0,b.start)+a+c.substring(b.end));a=b.start+a.length;f.caret(a,a)}}function c(a){var d;if(9==a.which){d=$("#tabcomplete li");if(!d.length)return;var c=d.filter(".chosen").removeClass("chosen"),c=a.shiftKey?c.prev():c.next();c.length||(c=a.shiftKey?d.last():d.first());d=c.addClass("chosen").text()}else if(27==
a.which){d=$("#tabcomplete li");if(!d.length)return;d=j;j=null}else return;a.preventDefault();b(d)}function i(a){if(a.which)switch(a.which){case 9:case 16:case 17:case 18:case 220:return}if(a=e()){if(j!=a.name){var b=[];j=a.name;var c;c=a.name?RegExp("^"+StackExchange.helpers.noDiacritics(a.name.replace(/ /g,"").toLowerCase()).replace(/\./g,"\\."),"i"):/^\W/;for(var f=k.length,i=0;i<f;i++){var o=k[i].name;(a.name?StackExchange.helpers.noDiacritics(o.replace(/ /g,"").toLowerCase()):o).match(c)&&b.push(o.replace(/ /g,
""))}g(b)}}else j=null,g([])}function a(a){return!a?null:parseInt(a.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var k,f,j=null;$("#tabcomplete > li").live("mousedown",function(){var a=$(this);a.parent().find("li.chosen").removeClass("chosen");b(a.addClass("chosen").text());return!1});var o=a($("#hlinks a.profile-link").attr("href"));return{init:function(b){if(!StackExchange.options.isMobile){var d=b.closest("div.comments"),e=d.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']"),
e=a(e.attr("href")),g=[];d.find("a.comment-user").each(function(b,d){var c=d.firstChild;if(3!==c.nodeType)StackExchange.debug.log("unexpected structure in comment owner link");else{var c=c.nodeValue,e=a($(d).attr("href"));e!==o&&g.push({id:e,name:c})}});k=[];for(var d={},q=g.length-1;0<=q;q--){var p=g[q];d[p.id]||(k.push(p),d[p.id]=!0)}$("#tabcomplete").remove();f&&f.unbind($.browser.opera?"keypress":"keydown",c).unbind("keyup click",i);0===k.length||1===k.length&&k[0].id===e?f=null:(f=b,j=null,$("<ul id='tabcomplete' />").insertBefore(b),
b.bind("keydown",c).bind("keyup click",i))}}}}();
StackExchange.inlineEditing={init:function(){function g(e,b,c,g){b.fadeIn(c,g);e.hide()}$(".post-menu .edit-post").live("click",function(e){if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey){var b=$(this),c=b.closest(".question, .answer");if(1==b.data("handling-event"))return!1;b.data("handling-event",1);c.find("#edit-tags-cancel").length&&StackExchange.inlineTagEditing.restoreCurrentTags(!0);$("#show-editor-button").hide();b.addSpinner();var i=c.hasClass("answer"),a=c.find(".postcell,.answercell"),
k=a.find("> *"),f=$('<div class="inline-editor"/>').hide().appendTo(a);f.load(b.attr("href")+"-inline",function(e,o){var h;f.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();c.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);if("error"==o)StackExchange.helpers.showErrorMessage(a,"The post could not be loaded"),f.remove(),b.data("handling-event",0);else{g(k,f,300);
var d=function(a){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?"))return!1;StackExchange.navPrevention.stop()}$("#show-editor-button").show();b.data("handling-event",0);g(f,a,300,function(){f.remove()});a.offset().top<$(window).scrollTop()&&$("html, body").animate({scrollTop:$(c).offset().top-55},200);return!1},l=function(){r.unbind("keyup",n);u.trigger(h)},n=function(){u.trigger(r[0].value);return!0};f.find(".cancel-edit").click(function(){l();
d(k)});var q=StackExchange.helpers.DelayedReaction(function(a){$.ajax({type:"POST",data:{hide:a},url:"/user/save-pref/hide-preview-for-inline-editing"})},1E3,{sliding:!0}),p=f.find(".hide-preview");p.click(function(){var a=f.find(".wmd-preview"),b=a.is(":visible");b?(a.slideUp(),p.text("show preview")):(a.slideDown(),p.text("hide preview"));q.trigger(b);return!1});f.find('input[type="submit"]').attr("id").replace("submit-button","");var t=f.find("form"),r=f.find("#title"),y=$("#question-header a");
h=r.val();var u=StackExchange.helpers.DelayedReaction(function(a){y.text(a);"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,y[0]])},{sliding:!0});r.keyup(n);f.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(a){if(!0===a.ctrlKey&&13==a.keyCode)return t.submit(),!1;if(27==a.keyCode)return l(),d(k),!1});StackExchange.using("postValidation",function(){StackExchange.postValidation.initOnBlurAndSubmit(t,i?2:1,i?"answer":"question",!1,function(b){var c=$(b.html).hide();
a.replaceWith(c);i||$("#question-header a").text(b.title);$("html").trigger("inline-edit-complete",[c,b.title]);styleCode();d(c)})})}});return!1}})}};StackExchange.translation=function(){return{init:function(){Translate.init({selector:".trans",additionalPopupWork:function(g){g.addClass("popup")},urlSelector:function(g){return"/api/translate/languages/en/"+$(g).data("translation-hash")}})}}}();
StackExchange.vote_bounty=function(){var g,e=function(a,b,c){b=$(".bounty-vote");if(c.Success){$(".bounty-notification").remove();g=!1;var e=a.closest("td.votecell").parent().find("span.reputation-score:last");c.Message&&(c=$(c.Message),e.text(c.text()).attr("title",c.attr("title")));c=a.closest("div.vote").find(".bounty-award-container");1<c.length?(c=c.filter(":first").find(".bounty-award"),e=parseInt(c.text(),10),a=parseInt(a.text(),10),c.text("+"+(e+a)),b.remove()):(a.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off"),
b.not(a).remove())}else StackExchange.helpers.showErrorMessage(a.parent(),c.Message),b.removeClass("disabled")},b=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){var a=$(this),b=StackExchange.vote.getPostId(a);if(g?confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!"):1)$(".bounty-vote").addClass("disabled"),StackExchange.vote.submit(a,
b,StackExchange.vote.voteTypeIds.bountyClose,e)})},c=function(a){a.addSpinnerAfter({padding:"0 3px"});var b=$(a).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+b,dataType:"html",success:function(b){var c=$(b);c.appendTo(a.parent());c.find(".popup-close").click(function(){c.fadeOutAndRemove()});c.center().fadeIn("fast")},error:function(){a.parent().showErrorMessage("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})},
i=function(){var a=$(".bounty-link");a.click(function(){c(a)})};return{init:function(a){g=!!a.hasOpenBounty;a.canOpenBounty&&i();a.hasOpenBounty&&b()}}}();
